--- 
layout: post
title: Multiple View Geometry 책 내용 정리 파트2
description: 
date: 2020-06-05
categories: [Mathematics]
tag: [geometry, computer-vision, multiple-view-geometry, slam]
use_math: true
comments: true
---
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org098d0df">1. Epipolar Geometry and the Fundamental Matrix</a>
<ul>
<li><a href="#org93b1350">1.1. Epipolar geometry</a></li>
<li><a href="#org1ba9000">1.2. The fundamental matrix $\mathbf{F}$</a>
<ul>
<li><a href="#org24a653e">1.2.1. Proof</a></li>
<li><a href="#orgb4d08ce">1.2.2. Geometric derivation</a></li>
<li><a href="#org4240508">1.2.3. Algebraic derivation</a></li>
</ul>
</li>
<li><a href="#orgb4b37c0">1.3. The epipolar line homography</a>
<ul>
<li><a href="#org12133ff">1.3.1. Result 9.5</a></li>
</ul>
</li>
<li><a href="#org3279d7d">1.4. Fundamental matrices arising from special motions</a>
<ul>
<li><a href="#org2fd33f7">1.4.1. Pure translation</a></li>
</ul>
</li>
<li><a href="#org1fbbbb2">1.5. Retrieving the camera matrices</a>
<ul>
<li><a href="#org60837dd">1.5.1. Projective invariance and canonical cameras</a></li>
<li><a href="#org6876bd7">1.5.2. Result 9.8</a></li>
<li><a href="#org038ba7e">1.5.3. Proof</a></li>
<li><a href="#org1395de4">1.5.4. Canonical form of camera matrices</a></li>
<li><a href="#org05f840b">1.5.5. Result 9.9</a></li>
<li><a href="#org27fbdb8">1.5.6. Projective ambiguity of cameras given F</a></li>
<li><a href="#org8b4f99e">1.5.7. Theorem 9.10</a></li>
<li><a href="#org19bbbd0">1.5.8. Proof</a></li>
</ul>
</li>
<li><a href="#org664ef49">1.6. Canonical cameras given F</a>
<ul>
<li><a href="#orgbd898e6">1.6.1. Result 9.12</a></li>
<li><a href="#org4f011de">1.6.2. Result 9.13</a></li>
<li><a href="#orgbee65a4">1.6.3. Result 9.14</a></li>
<li><a href="#org2e7a826">1.6.4. Result 9.15</a></li>
</ul>
</li>
<li><a href="#org7692670">1.7. The essential matrix</a>
<ul>
<li><a href="#org7781e32">1.7.1. Properties of the essential matrix</a></li>
<li><a href="#org5573a8b">1.7.2. Result 9.17</a></li>
<li><a href="#orgece0895">1.7.3. Proof</a></li>
</ul>
</li>
<li><a href="#org6a4d981">1.8. Extraction of cameras from the essential matrix</a>
<ul>
<li><a href="#org232b3f3">1.8.1. Result 9.18</a></li>
<li><a href="#orga2f917f">1.8.2. Proof</a></li>
</ul>
</li>
<li><a href="#org09ea3fb">1.9. Geometrical interpretation of the four solutions</a></li>
</ul>
</li>
<li><a href="#orgccda7b5">2. 3D Reconstruction of Cameras and Structure</a>
<ul>
<li><a href="#org2fccbfa">2.1. The projective reconstruction theorem</a>
<ul>
<li><a href="#org0ef5eb4">2.1.1. Theorem 10.1 (Projective reconstruction theorem)</a></li>
<li><a href="#orga175d7a">2.1.2. Proof</a></li>
</ul>
</li>
<li><a href="#org2ba7b16">2.2. Stratified reconstruction</a>
<ul>
<li><a href="#orgf85d5c4">2.2.1. The step to affine reconstruction</a></li>
<li><a href="#orge1997aa">2.2.2. The step to metric reconstruction</a></li>
<li><a href="#org37ab3f7">2.2.3. Result 10.5</a></li>
<li><a href="#org2abbe90">2.2.4. Proof</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org5cd7166">3. Computation of the Fundamental Matrix $\mathbf{F}$</a>
<ul>
<li><a href="#orgb2e606f">3.1. Basic equations</a>
<ul>
<li><a href="#org28334a6">3.1.1. The minimum case - seven point correspondences</a></li>
</ul>
</li>
<li><a href="#org5576fa1">3.2. The normalized 8-point algorithm</a>
<ul>
<li><a href="#orgb761148">3.2.1. Degenrate configurations</a></li>
<li><a href="#orgdd8a9a9">3.2.2. Proof</a></li>
</ul>
</li>
<li><a href="#orgc443854">3.3. The Gold Standard method</a></li>
</ul>
</li>
<li><a href="#org4b7d08d">4. Structure Computation</a>
<ul>
<li><a href="#orgea9eec4">4.1. Problem statement</a></li>
<li><a href="#org57cc37e">4.2. Linear triangulation methods</a>
<ul>
<li><a href="#org2cb034c">4.2.1. Inhomogeneous method</a></li>
</ul>
</li>
<li><a href="#org0f0b8fd">4.3. An optimial solution</a>
<ul>
<li><a href="#orge7ee13a">4.3.1. Reformulation of the minimization problem</a></li>
<li><a href="#org53eca9d">4.3.2. Details of the minimization</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org34812e0">5. Scene planes and homographies</a>
<ul>
<li><a href="#orgc939da6">5.1. Homographies given the plane and vice versa</a>
<ul>
<li><a href="#org0469075">5.1.1. Result 13.1</a></li>
<li><a href="#org1644be4">5.1.2. Proof</a></li>
<li><a href="#org92602c6">5.1.3. A calibrated stereo rig</a></li>
<li><a href="#org452bdae">5.1.4. Homographies compatible with epipolar geometry</a></li>
<li><a href="#orge85b662">5.1.5. Result 13.3</a></li>
<li><a href="#org895019f">5.1.6. Proof</a></li>
<li><a href="#org611486b">5.1.7. Corollary</a></li>
<li><a href="#org7b05a26">5.1.8. Proof</a></li>
</ul>
</li>
<li><a href="#orge1c4778">5.2. Plane induced homographies given $\mathbf{F}$and image correspondences</a>
<ul>
<li><a href="#orgfc2678a">5.2.1. Three points</a></li>
<li><a href="#org9a11671">5.2.2. Result 13.6</a></li>
<li><a href="#orgb18bcb8">5.2.3. Proof</a></li>
<li><a href="#org8320f35">5.2.4. A point and line</a></li>
<li><a href="#org0f237c0">5.2.5. Result 13.7</a></li>
<li><a href="#org06efc07">5.2.6. Proof</a></li>
<li><a href="#org9cae6b9">5.2.7. The homography for a corresponding point and line</a></li>
<li><a href="#org4de0518">5.2.8. Result 13.8</a></li>
</ul>
</li>
<li><a href="#org02fe78e">5.3. Computing $\mathbf{F}$given the homography induced by a plane</a></li>
<li><a href="#orgfa30ee8">5.4. The infinite homography $\mathbf{H}_{\infty}$</a>
<ul>
<li><a href="#orgf3df7af">5.4.1. Definition 13.10</a></li>
<li><a href="#org3b44cad">5.4.2. Affine and metric reconstruction</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org289cb01">6. Affine Epipolar Geometry</a>
<ul>
<li><a href="#org3349b44">6.1. Affine epipolar geometry</a>
<ul>
<li><a href="#orgbcfb884">6.1.1. Epipolar lines</a></li>
<li><a href="#orga4d4898">6.1.2. The epipoles</a></li>
</ul>
</li>
<li><a href="#org34c7074">6.2. The affine fundamental matrix</a>
<ul>
<li><a href="#orgdeabc81">6.2.1. Result 14.1</a></li>
<li><a href="#orgef37007">6.2.2. Derivation</a></li>
<li><a href="#orgacf7efe">6.2.3. Geometric derivation</a></li>
<li><a href="#org900b6f2">6.2.4. Properties</a></li>
<li><a href="#org22cd108">6.2.5. The epipoles</a></li>
<li><a href="#orgbd590ab">6.2.6. Epipolar lines</a></li>
</ul>
</li>
<li><a href="#org8640985">6.3. Estimating $\mathbf{F}_{A}$from image point correspondences</a>
<ul>
<li><a href="#org90dbaa9">6.3.1. Algorithm 14.2</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org40e9c52">7. References</a></li>
<li><a href="#orgcb637de">8. Closure</a></li>
</ul>
</div>
</nav>

<div id="outline-container-org098d0df" class="outline-2">
<h2 id="org098d0df"><span class="section-number-2">1</span> Epipolar Geometry and the Fundamental Matrix</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org93b1350" class="outline-3">
<h3 id="org93b1350"><span class="section-number-3">1.1</span> Epipolar geometry</h3>
<div class="outline-text-3" id="text-1-1">

<figure>
<img src="/pictures/200607_mvg/48.png" alt="48.png" align="center" width="700px">

</figure>

<p>
Epipolar geometry는 <b>2개의 카메라 이미지 사이에 정의되는 기하학 관계</b> 를 의미한다. 이는 3차원 물체의 구조와는 독립적이며 <b>오로지 카메라의 내부 파라미터와 두 카메라 사이의 상대 포즈에만 의존한다.</b> 위 그림과 같이 3차원 공간 상에 두 카메라의 중심점 $\mathbf{C}, \mathbf{C}^{&prime;}$과 점 $\mathbf{X}$가 주어졌을 때 세 점을 통해 유일하게 결정되는 평면을 <b>Epipolar Plane</b> $\pi$라고 한다. 또한 카메라의 중심점 $\mathbf{C}$를 $\mathbf{P}^{&prime;}$을 통해 프로젝션한 점 $\mathbf{P}^{&prime;}\mathbf{C}=\mathbf{e}^{&prime;}$을 이미지 평면 $&pi;_{\mathbf{C}^{&prime;}}$의 <b>Epipole</b> $\mathbf{e}^{&prime;}$이라고 한다. 그리고 $\mathbf{e}^{&prime;}$과 $\mathbf{x}^{&prime;}$을 잇는 직선을 <b>Epipolar Line</b> $\mathbf{l}^{&prime;}$이라고 한다. $\mathbf{e}, \mathbf{l}$또한 마찬가지로 이미지 평면 $&pi;_{\mathbf{C}}$의 Epipole과 Epipolar Line을 의미한다. 
</p>
</div>
</div>

<div id="outline-container-org1ba9000" class="outline-3">
<h3 id="org1ba9000"><span class="section-number-3">1.2</span> The fundamental matrix $\mathbf{F}$</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Fundamental Matrix는 <b>2개의 주어진 카메라의 중심점 $\mathbf{C}, \mathbf{C}^{&prime;}$이 주어질 때 $\mathbf{F}&isin; \mathbb{R}^{3&times; 3}$이며 rank 2를 가지는 행렬</b> 을 의미한다. $\mathbf{F}$는 두 카메라의 이미지 평면에 있는 점들의 대응쌍 $\mathbf{x}, \mathbf{x}^{&prime;}$에 대하여
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{\prime\intercal}\mathbf{Fx} = 0
  \end{aligned}
\end{equation}
<p>
을 만족한다. 이 때 곱해지는 순서에 따라 의미가 달라지며 $\mathbf{x}^{&prime;\intercal}\mathbf{Fx}=0$인 경우 두 카메라 $\mathbf{C},\mathbf{C}^{\prime}$사이의 Fundamental Matrix라고 하고 $\mathbf{x}^{\intercal}\mathbf{F}^{&prime;}\mathbf{x}^{&prime;}=0$인 경우 두 카메라 $\mathbf{C}^{\prime},\mathbf{C}$사이의 Fundamental Matrix라고 한다. 이 때, $\mathbf{F}^{\intercal} = \mathbf{F}^{\prime}$관계가 성립한다.
</p>

<p>
기하학적 측면에서 보면, $\mathbf{x}^{&prime;\intercal}\mathbf{Fx}=0$에서 <b>$\mathbf{Fx}$는 카메라 $\mathbf{C}$의 이미지 평면 $\pi_{\mathbf{C}}$위의 점 $\mathbf{x}$가 존재할 때 이와 상응하는 Epipolar Line $\mathbf{l}^{&prime;} &isin; &pi;_{\mathbf{C}^{&prime;}}$을 의미한다.</b> 따라서 <b>$\mathbf{F}$는 이미지 평면 $\pi_{\mathbf{C}}$위의 점 $\mathbf{x}$를 Epipolar Line $\mathbf{l}^{&prime;}$으로 매핑하는 함수로 생각할 수 있다.</b> 
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{F}: \ \mathbf{x} \mapsto \mathbf{l}^{\prime} \\
    &amp; \text{where, } \ \ \mathbf{x} \in \pi_{\mathbf{C}} \in \mathbb{P}^{2} \\
    &amp; \mathbf{l}^{\prime} \in (\mathbb{P}^{2})^{\vee}
  \end{aligned}
\end{equation}
</div>

<div id="outline-container-org24a653e" class="outline-4">
<h4 id="org24a653e"><span class="section-number-4">1.2.1</span> Proof</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
($\Rightarrow$)$\mathbf{l}^{&prime;} = \mathbf{Fx}$인 경우 Epipolar Line $\mathbf{l}^{&prime;}$에 위치한 점 $\mathbf{x}^{&prime;}$에 대하여 다음이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{\prime\intercal}\mathbf{l}^{\prime} = \mathbf{x}^{\prime\intercal}\mathbf{Fx}=0 \quad \forall \mathbf{x} \leftrightarrow \mathbf{x}^{\prime}
  \end{aligned}
\end{equation}
<p>
($\Leftarrow$) 이미지 평면 $\pi_{\mathbf{C}}$위의 점 $\mathbf{x}$를 Back-projection하여 $\mathbf{X}_{1}, \mathbf{X}_{2}$점이 생성되었다고 했을 때, 이를 $&pi;_{\mathbf{C}^{&prime;}}$에 프로젝션시키면 각각 $\mathbf{x}^{\prime}_{1} = \mathbf{P}^{\prime}\mathbf{X}_{1}$, $\mathbf{x}^{\prime}_{2} = \mathbf{P}^{\prime}\mathbf{X}_{2}$점들이 생성된다. 이 때 Fundamental Matrix $\mathbf{F}$에 의해
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}^{\prime\intercal}_{1}\mathbf{Fx} = 0 \\
    &amp; \mathbf{x}^{\prime\intercal}_{2}\mathbf{Fx} = 0
  \end{aligned}
\end{equation}
<p>
의 관계가 성립하므로 $\mathbf{Fx}$는 $\mathbf{x}^{&prime;\intercal}_{i}, \ i=1,2$와 수직인 Epipolar Line $\mathbf{l}^{&prime;}$을 의미한다.
</p>
</div>
</div>

<div id="outline-container-orgb4d08ce" class="outline-4">
<h4 id="orgb4d08ce"><span class="section-number-4">1.2.2</span> Geometric derivation</h4>
<div class="outline-text-4" id="text-1-2-2">

<figure>
<img src="/pictures/200607_mvg/49.png" alt="49.png" align="center" width="600px">

</figure>

<p>
두 카메라 $\mathbf{C}, \mathbf{C}^{&prime;}$가 있을 때 이미지 평면 $\pi_{\mathbf{C}}$위의 점 $\mathbf{x}$를 Back-projection한 직선 $\mathbf{l}_{\mathbf{x}}$가 3차원 공간 상에서 임의의 평면 $&pi;_{0}$와 한 점에서 만난다고 가정한다. 이 때 $\mathbf{C}, \mathbf{C}^{&prime;}$의 이미지 점들을 연결해주는 Homography $\mathbf{H}_{&pi;_{0}}$를 생각해보면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{\pi_{0}} : &amp; \pi_{\mathbf{C}} \mapsto \pi_{\mathbf{C}^{\prime}} \\
    &amp; \mathbf{x} \mapsto \mathbf{x}^{\prime} \\ 
    &amp; \mathbf{x} \mapsto \mathbf{P}^{\prime}(\mathbf{l_{x}} \cap \pi_{0})
  \end{aligned}
\end{equation}
<p>
$\pi_{\mathbf{C}^{\prime}}$위에 프로젝션된 점을 $\mathbf{x}^{&prime;} = \mathbf{P}^{&prime;}(\mathbf{l}_{\mathbf{x}} &cap; &pi;_{0})$라고 하고 Epipolar Line $\mathbf{l}^{&prime;}$을 $\mathbf{x}^{&prime;}$와 Epipole $\mathbf{e}^{&prime;}$를 이어주는 직선이라고 정의하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{e}^{\prime} \times \mathbf{x}^{\prime} &amp; = \mathbf{e}^{\prime \wedge}\mathbf{x}^{\prime} \\
    &amp; = \mathbf{e}^{\prime\wedge} \mathbf{H}_{\pi_{0}}(\mathbf{x}) \quad \text{is Epipolar Line.}
  \end{aligned}
\end{equation}
<p>
와 같이 나타낼 수 있다. 이 때 $\mathbf{l}^{&prime;} = \mathbf{Fx}$의 공식을 사용하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}^{\prime} &amp; = \mathbf{Fx} \\
    &amp; = \mathbf{e}^{\prime\wedge} \mathbf{H}_{\pi_{0}} \mathbf{x} \\
  \end{aligned}
\end{equation}
<p>
과 같다. 따라서 <b>$\mathbf{F} = \mathbf{e}^{\prime\wedge}\mathbf{H}_{\pi_{0}}$</b> 가 성립한다. 이 때, $\mathbf{H}_{&pi;_{0}}$는 rank 3인 행렬이며 $\mathbf{e}^{&prime;&and;}$는 rank 2인 행렬이므로 $\mathbf{F}$는 rank 2인 행렬이 된다.
</p>
</div>
</div>

<div id="outline-container-org4240508" class="outline-4">
<h4 id="org4240508"><span class="section-number-4">1.2.3</span> Algebraic derivation</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
Epipolar Line $\mathbf{l}^{&prime;} = \mathbf{P}^{&prime;}(\mathbf{X(\lambda)})$와 같다. 이 때 $\mathbf{X}(&lambda;)$는 카메라 $\mathbf{C}$의 중심점을 지나는 $\mathbf{x}$의 Back-projection 직선을 의미한다. $\mathbf{X}(&lambda;)$는 다음과 같이 다시 작성할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{X}(\lambda) = \mathbf{P}^{\dagger}\mathbf{x} + \lambda \mathbf{C} \quad \lambda \in \mathbb{R}\\
  \end{aligned}
\end{equation}
<p>
여기서 $\mathbf{P}^{&dagger;}$는 $\mathbf{P}$의 Pseudo Inverse를 의미하고
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{P}^{\dagger} = \mathbf{P}^{\intercal}(\mathbf{PP}^{\intercal})^{-1}
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{l}^{&prime;} = \mathbf{P}^{&prime;}(\mathbf{X}(&lambda;))$는 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{P}^{\prime}(\mathbf{X}(\lambda)) &amp; = \mathbf{P}^{\prime}\mathbf{P}^{\dagger}\mathbf{x} + \lambda \mathbf{P}^{\prime}\mathbf{C} \\
    &amp; \mathbf{P}^{\prime}\mathbf{P}^{\dagger}\mathbf{x} + \lambda \mathbf{e}^{\prime}
  \end{aligned}
\end{equation}
<p>
$\mathbf{P}^{&prime;}\mathbf{C}$는 카메라 $\mathbf{C}$의 중심점을 $&pi;_{\mathbf{C}^{&prime;}}$에 프로젝션시킨 점을 의미하므로 Epipole $\mathbf{e}^{&prime;}$가 된다. $&lambda;=0$일 때 $\mathbf{P}^{&prime;}(\mathbf{X}(0))= \mathbf{P}^{&prime;}\mathbf{P}^{&dagger;}\mathbf{x}$이고 $&lambda;=&infin;$일 때 $\mathbf{P}^{&prime;}(\mathbf{X}(&infin;))=\mathbf{P}^{&prime;}\mathbf{C}=\mathbf{e}^{&prime;}$가 된다. 따라서 Epipolar Line $\mathbf{l}^{&prime;}$는 두 점을 잇는 직선이므로
</p>

\begin{equation}
  \begin{aligned}
     \mathbf{l}^{\prime} = \mathbf{e}^{\prime\wedge} \mathbf{P}^{\prime}\mathbf{P}^{\dagger}
  \end{aligned}
\end{equation}
<p>
이 된다. 추가적으로 Epipole $\mathbf{e}^{&prime;}$는 Epipolar Line $\mathbf{l}^{&prime;}$에 포함되어 있고 모든 $\mathbf{x}_{i}$에 대해
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{e}^{\prime} \mathbf{Fx}_{i} = 0 \quad \forall \mathbf{x}_{i}
  \end{aligned}
\end{equation}
<p>
이 성립하므로 $\mathbf{e}^{&prime;}\mathbf{F}=0$이 성립한다. <b>결론적으로 $\mathbf{e}^{&prime;}$는 $\mathbf{F}$의 Left null vector</b> 이다. 또한 $\mathbf{e}$는 $\mathbf{F}$의 (right) null vector가 된다.
</p>
</div>
</div>
</div>

<div id="outline-container-orgb4b37c0" class="outline-3">
<h3 id="orgb4b37c0"><span class="section-number-3">1.3</span> The epipolar line homography</h3>
<div class="outline-text-3" id="text-1-3">
<p>
두 카메라 $\mathbf{C}, \mathbf{C}^{&prime;}$이 존재하고 이미지 평면 위의 한 점을 각각 $\mathbf{x}, \mathbf{x}^{&prime;}$라고 하면 이에 상응하는 Epipolar Line $\mathbf{l}, \mathbf{l}^{&prime;}$이 존재한다. 이 때, <b>$\mathbf{l}$과 $\mathbf{l}^{\prime}$사이에는 별도의 대응 관계가 성립</b> 하는데 이는
</p>

\begin{equation}
  \begin{aligned}
    \mathbb{P}(\pi)^{\vee} \mapsto \mathbb{P}(\pi^{\prime})^{\vee}
  \end{aligned}
\end{equation}
<p>
<b>매핑 관계인 Homography 행렬</b> 로 주어진다.
</p>
</div>

<div id="outline-container-org12133ff" class="outline-4">
<h4 id="org12133ff"><span class="section-number-4">1.3.1</span> Result 9.5</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
카메라 중심점 $\mathbf{C}$를 통과하면서 Epipole $\mathbf{e}$를 지나지 않는 직선 $\mathbf{k}$가 있을 때 $\mathbf{k}$는 Epipolar Line $\mathbf{l}$과 반드시 한 점 $\mathbf{p}$에서 만난다. $\mathbf{p}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{p} = \mathbf{k}^{\wedge}\mathbf{l}
  \end{aligned}
\end{equation}
<p>
과 같이 구할 수 있고 $\mathbf{p}$는 Fundamental Matrix에 의해 Epipolar Line $\mathbf{l}^{&prime;}$으로 프로젝션되므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}^{\prime} &amp; = \mathbf{F}\mathbf{k}^{\wedge}\mathbf{l} \\
    &amp; = \mathbf{H}\mathbf{l} \\
  \end{aligned}
\end{equation}
<p>
의 관계가 성립한다. 따라서 <b>$\mathbf{l}, \mathbf{l}^{&prime;}$은 $\mathbf{H}=\mathbf{Fk}^{&and;}$인 Homography 행렬에 의해 대응 관계가 성립</b> 한다.
</p>
</div>
</div>
</div>

<div id="outline-container-org3279d7d" class="outline-3">
<h3 id="org3279d7d"><span class="section-number-3">1.4</span> Fundamental matrices arising from special motions</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-org2fd33f7" class="outline-4">
<h4 id="org2fd33f7"><span class="section-number-4">1.4.1</span> Pure translation</h4>
<div class="outline-text-4" id="text-1-4-1">

<figure>
<img src="/pictures/200607_mvg/50.png" alt="50.png" align="center" width="700px">

</figure>

<p>
순수 이동(pure translation)이란 카메라 센터를 회전하지 않고 이동만 하는 것을 의미한다. 이 때, 월드의 모든 물체를 고정시킨 채로 카메라를 움직이는 것과 카메라를 고정시킨 채로 월드의 모든 물체를 이동시키는 것은 동일하다. 처음 위치의 카메라 행렬과 카메라 센터를 각각 $\mathbf{P}, \mathbf{C}$라고 하고 순수 이동 후 카메라 행렬과 카메라 센터를 각각 $\mathbf{P}^{&prime;}, \mathbf{C}^{&prime;}$라고 할 때 <b>두 카메라의 베이스라인의 길이는 카메라 중심점의 순수 이동량과 동일</b> 하다. 
</p>

<p>
또한 <b>두 카메라의 Epipole을 각각 $\mathbf{e},\mathbf{e}^{&prime;}$이라고 하면 두 Epipole의 위치는 동일하며 이는 곧 소실점(vanishing point)을 의미</b> 한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{e} = \mathbf{e}^{\prime} = \mathbf{v}
  \end{aligned}
\end{equation}
<p>
이러한 순수 이동 상황에서 $\mathbf{e}=\mathbf{e}^{&prime;}$를 Auto Epipolar라고 한다.
</p>

<p>
대수적으로 Fundamental Matrix를 유도해보면 처음 카메라 행렬을 $\mathbf{P}=\mathbf{K}[\mathbf{I}|0]$이라고 하고 순수 이동 후 카메라 행렬을 $\mathbf{P}^{&prime;}=\mathbf{K}[\mathbf{I}|\mathbf{t}]$라고 하면 이전 섹션에서 Fundamental Matrix $\mathbf{F}$는 $\mathbf{F} = \mathbf{e}^{\prime\wedge}\mathbf{P}^{\prime}\mathbf{P}^{\dagger}$이므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} &amp; = \mathbf{e}^{\prime\wedge}\mathbf{P}^{\prime}\mathbf{P}^{\dagger} \\
    &amp; = \mathbf{e}^{\prime\wedge}\mathbf{KK}^{-1} \\
    &amp; = \mathbf{e}^{\prime\wedge}
  \end{aligned}
\end{equation}
<p>
따라서 <b>순수 이동 상황에서 Fundamental Matrix는 $\mathbf{F}=\mathbf{e}^{\prime\wedge}$</b> 이다.
</p>
</div>
</div>
</div>

<div id="outline-container-org1fbbbb2" class="outline-3">
<h3 id="org1fbbbb2"><span class="section-number-3">1.5</span> Retrieving the camera matrices</h3>
<div class="outline-text-3" id="text-1-5">
</div>
<div id="outline-container-org60837dd" class="outline-4">
<h4 id="org60837dd"><span class="section-number-4">1.5.1</span> Projective invariance and canonical cameras</h4>
</div>
<div id="outline-container-org6876bd7" class="outline-4">
<h4 id="org6876bd7"><span class="section-number-4">1.5.2</span> Result 9.8</h4>
<div class="outline-text-4" id="text-1-5-2">
<p>
두 카메라 $\mathbf{C}, \mathbf{C}^{&prime;}$에 대응하는 이미지 평면 상의 점들 $\mathbf{x}, \mathbf{x}^{&prime;}$과 Fundamental Matrix $\mathbf{F}$가 존재할 때 $\mathbf{F}$는 $\mathbf{x}\leftrightarrow \mathbf{x}^{\prime}$대응쌍의 Homography 변환에 상관없이 동일하다. 다시 말하면, $\mathbb{P}^{3} \mapsto\mathbb{P}^{3}$을 만족하는 Homograhpy 변환 $\mathbf{H}&isin; \mathbb{R}^{4&times; 4}$가 존재할 때 $\mathbf{H}$는
</p>

\begin{equation}
  \begin{aligned}
    (\mathbf{P},\mathbf{P}^{\prime}) \mapsto (\mathbf{PH}, \mathbf{P}^{\prime}\mathbf{H})
  \end{aligned}
\end{equation}
<p>
를 만족하는데 <b>이러한 $\mathbf{H}$에 관계없이 Fundamental Matrix $\mathbf{F}$는 동일</b> 하다.
</p>
</div>
</div>

<div id="outline-container-org038ba7e" class="outline-4">
<h4 id="org038ba7e"><span class="section-number-4">1.5.3</span> Proof</h4>
<div class="outline-text-4" id="text-1-5-3">
<p>
$(\mathbf{PH},\mathbf{P}^{&prime;}\mathbf{H})$에 해당하는 대응점쌍 $\mathbf{x}&harr; \mathbf{x}^{&prime;}$에 대해서
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{\prime\intercal}\tilde{\mathbf{F}}\mathbf{x} = 0
  \end{aligned}
\end{equation}
<p>
이 성립한다. 이 때 $\mathbf{x}=\mathbf{PHX}, \mathbf{x}^{&prime;}=\mathbf{P}^{&prime;}\mathbf{HX}$이므로 이를 위 식에 대입하면 
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{X}^{\intercal}\mathbf{H}^{\intercal}\mathbf{P}^{\prime\intercal}\tilde{\mathbf{F}}\mathbf{PHX} = 0
  \end{aligned}
\end{equation}
<p>
을 만족하고 위 식은 모든 $&forall; \mathbf{X}&isin; \mathbb{P}^{3}$에 대해서 성립한다. $\mathbf{X}=\mathbf{H}^{-1}(\mathbf{HX}), ~{\mathbf{X}} = \mathbf{HX}$로 치환하여 다시 위 식에 대입하면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \tilde{\mathbf{X}}^{\intercal}\mathbf{H}^{-\intercal}\mathbf{H}^{\intercal}\mathbf{P}^{\prime\intercal}\tilde{\mathbf{F}}\mathbf{PHH}^{-1}\tilde{\mathbf{X}} = 0 \\
    &amp; \tilde{\mathbf{X}}^{\intercal}\mathbf{P}^{\prime\intercal}\tilde{\mathbf{F}}\mathbf{P}\tilde{\mathbf{X}} = 0 \\
    &amp; \tilde{\mathbf{x}}^{\prime\intercal}\tilde{\mathbf{F}}\tilde{\mathbf{x}} =0 
  \end{aligned}
\end{equation}
<p>
이 되어 <b>결론적으로 $\mathbf{F}= ~{\mathbf{F}}$가 성립</b> 한다.
</p>
</div>
</div>

<div id="outline-container-org1395de4" class="outline-4">
<h4 id="org1395de4"><span class="section-number-4">1.5.4</span> Canonical form of camera matrices</h4>
<div class="outline-text-4" id="text-1-5-4">
<p>
위와 같은 성질에 따라 동일한 Fundamental Matrix $\mathbf{F}$에 여러 $(\mathbf{P},\mathbf{P}^{\prime})$쌍이 대응되므로 $\mathbf{F}$와 $(\mathbf{P},\mathbf{P}^{&prime;})$는 One-to-Many Correspondence 관계가 된다. 따라서 이러한 모호성에도 불구하고 <b>$\mathbf{F}$의 정확한 변환을 표현하기 위해 $\mathbf{P}=[\mathbf{I}|0]$, $\mathbf{P}^{&prime;}=[\mathbf{M}|\mathbf{m}]$과 같이 처음 카메라 행렬 $\mathbf{P}$를 단순하게 나타내는 방법을 Canonical Form</b> 이라고 한다. 하지만 $\mathbf{P}=[\mathbf{I}|0]$이라고 해서 $\mathbf{P}^{&prime;}$이 유일하게 결정되는 것은 아니다. 
</p>

<p>
임의의 카메라 행렬 $\mathbf{P}&isin; \mathbb{R}^{3&times;4}$가 주어졌을 때 이를 역행렬이 존재하는 행렬 $\mathbf{P}^{&lowast;}=\begin{bmatrix}\mathbf{P}\\ \mathbf{r}_{4} \end{bmatrix}&isin; \mathbb{R}^{4&times;4}$로 변경한 다음
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{P}^{\ast}\mathbf{H} = \begin{bmatrix} \mathbf{I} &amp; \mathbf{0} \\ \mathbf{0} &amp; \mathbf{1} \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
을 만족하는 $\mathbf{H}$가 존재한다고 하면 $\mathbf{PH}= [\mathbf{I}| \mathbf{0}]$을 만족한다. 따라서 <b>$\mathbf{H}$가 존재한다는 가정 하에 모든 임의의 카메라 행렬 $\mathbf{P}$는 Canonical Form으로 쓸 수 있다.</b>
</p>

<p>
그렇다면 Fundamental Matrix $\mathbf{F}$는 $\mathbf{M}, \mathbf{m}$에 대하여 어떻게 쓸 수 있을까?
</p>

<p>
우선 임의의 두 카메라 행렬 $\mathbf{P}= \mathbf{K}[\mathbf{I}|0], \mathbf{P}^{&prime;}=\mathbf{K}^{&prime;}[\mathbf{R}|\mathbf{t}]$가 존재할 때 다음의 공식들이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{PP}^{\intercal} = \mathbf{K}^{2} \\
    &amp; \mathbf{P}^{\dagger } = \mathbf{P}^{\intercal}(\mathbf{PP}^{\intercal})^{-1} = \begin{bmatrix} \mathbf{K}^{-1} \\ 0 \end{bmatrix} \\
    &amp; \mathbf{C} = \begin{bmatrix} 0 &amp; 1 \end{bmatrix}^{\intercal} \\
    &amp; \mathbf{e}^{\prime} = \mathbf{P}^{\prime}\mathbf{C} = \mathbf{K}^{\prime}\mathbf{t}
  \end{aligned}
\end{equation}
<p>
따라서 이에 대응하는 Fundamental Matrix $\mathbf{F}$는 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} &amp; = \mathbf{e}^{\prime\wedge}\mathbf{P}^{\prime}\mathbf{P}^{\dagger} \\
    &amp; = (\mathbf{K}^{\prime}\mathbf{t})^{\wedge}\mathbf{K}^{\prime}[\mathbf{R}|\mathbf{t}] \mathbf{K}^{-1}\begin{bmatrix} \mathbf{I} \\ 0 \end{bmatrix} \\
    &amp; = (\mathbf{K}^{\prime}\mathbf{t})^{\wedge}\mathbf{K}^{\prime}\mathbf{R}\mathbf{K}^{-1}
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-org05f840b" class="outline-4">
<h4 id="org05f840b"><span class="section-number-4">1.5.5</span> Result 9.9</h4>
<div class="outline-text-4" id="text-1-5-5">
<p>
Canonical Form에 상응하는 Fundamental Matrix $\mathbf{F}$를 구해보면 두 카메라 행렬 $\mathbf{P}= [\mathbf{I}|0], \mathbf{P}^{&prime;}=[\mathbf{M}|\mathbf{m}]$에 대해 다음 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} = \mathbf{m}^{\wedge}\mathbf{M}
  \end{aligned}
\end{equation}
<p>
<b>Canonical Form의 $\mathbf{F}$는 $\mathbf{F}=\mathbf{m}^{&and;}\mathbf{M}$이다.</b>
</p>
</div>
</div>

<div id="outline-container-org27fbdb8" class="outline-4">
<h4 id="org27fbdb8"><span class="section-number-4">1.5.6</span> Projective ambiguity of cameras given F</h4>
</div>
<div id="outline-container-org8b4f99e" class="outline-4">
<h4 id="org8b4f99e"><span class="section-number-4">1.5.7</span> Theorem 9.10</h4>
<div class="outline-text-4" id="text-1-5-7">
<p>
Fundamental Matrix $\mathbf{F}$는 Homography 변환에 상관없이 동일하기 때문에 필연적으로 모호성이 발생하게 된다. 만약 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{&prime;})$의 $\mathbf{F}$와 $(~{\mathbf{P}}, ~{\mathbf{P}}^{&prime;})$의 $\mathbf{F}$가 동일한 경우, $(\mathbf{P},\mathbf{P}^{&prime;})$와 $(~{\mathbf{P}}, ~{\mathbf{P}}^{&prime;})$를 연결하는 Homography $\mathbf{H}$가 존재한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; ^{\exists}\mathbf{H} \in \text{PGL}_{4} \\
    &amp; (\tilde{\mathbf{P}}, \tilde{\mathbf{P}}^{\prime}) = (\mathbf{P},\mathbf{P}^{\prime})\mathbf{H}
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-org19bbbd0" class="outline-4">
<h4 id="org19bbbd0"><span class="section-number-4">1.5.8</span> Proof</h4>
<div class="outline-text-4" id="text-1-5-8">
<p>
두 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{\prime})$, $(~{\mathbf{P}}, ~{\mathbf{P}}^{&prime;})$이 주어졌을 때 이를 Canonical Form으로 쓰면 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = \tilde{\mathbf{P}} = [\mathbf{I}|0] \\
    &amp; \mathbf{P}^{\prime} = [\mathbf{A}|\mathbf{a}] \\
    &amp; \tilde{\mathbf{P}}^{\prime} = [\tilde{\mathbf{A}}|\tilde{\mathbf{a}}] \\
  \end{aligned}
\end{equation}
<p>
이 때, Fundamental Matrix $\mathbf{F}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} = \mathbf{a}^{\wedge}\mathbf{A} = \tilde{\mathbf{a}}^{\wedge}\tilde{\mathbf{A}}
  \end{aligned}
\end{equation}
<p>
가 성립한다. $\mathbf{F}$의 성질에 의해 $\mathbf{a}^{\intercal}\mathbf{F}=0, ~{\mathbf{a}}^{\intercal}\mathbf{F}=0$이 만족하게 되고
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{a}^{\intercal}\mathbf{F} = \mathbf{a}^{\intercal}\mathbf{a}^{\wedge}\mathbf{A} = 0 \\
    &amp; \tilde{\mathbf{a}}^{\intercal}\mathbf{F} = \tilde{\mathbf{a}}^{\intercal}\tilde{\mathbf{a}}^{\wedge}\tilde{\mathbf{A}} = 0 \\
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{a}$와 $~{\mathbf{a}}$는 각각 rank 1인 $\mathbf{F}$의 Left Null Space가 된다. 따라서 $\mathbf{a}, ~{\mathbf{a}}$는
</p>

\begin{equation}
  \begin{aligned}
    \tilde{\mathbf{a}} = k \mathbf{a}, \ \ k \neq 0 \in \mathbb{R}
  \end{aligned}
\end{equation}
<p>
인 관계가 성립한다. $~{\mathbf{a}}$를 치환하여 다시 표현하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} &amp; = \mathbf{a}^{\wedge}\mathbf{A} = \tilde{\mathbf{a}}^{\wedge}\tilde{\mathbf{A}} = k\mathbf{a}^{\wedge}\tilde{\mathbf{A}} = 0 \\
    &amp; = \mathbf{a}^{\wedge}(\mathbf{A} - k \tilde{\mathbf{A}}) = 0
  \end{aligned}
\end{equation}
<p>
따라서 $(\mathbf{A}- k ~{\mathbf{A}})$은 $\mathbf{a}$와 평행하다. 즉, 각 행렬의 열들이 배수 관계에 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{A} - k \tilde{\mathbf{A}} = \mathbf{av}^{\intercal} \ \ \ \text{for some } \mathbf{v}
  \end{aligned}
\end{equation}
<p>
따라서 $~{\mathbf{A}} = k^{-1}(\mathbf{A}+\mathbf{av}^{\intercal})$가 된다. 카메라 행렬 대응쌍은 다음과 같이 쓸 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = \tilde{\mathbf{P}} = [\mathbf{I}|0] \\
    &amp; \mathbf{P}^{\prime} = [\mathbf{A}|\mathbf{a}] \\
    &amp; \tilde{\mathbf{P}}^{\prime} = [k^{-1}(\mathbf{A}+\mathbf{av}^{\intercal}) \ | \ k\mathbf{a}] \\
  \end{aligned}
\end{equation}
<p>
<b>결론적으로 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{&prime;})$를 Canonical Form으로 변환하는 행렬을 $\mathbf{H}_{1}$, $(~{\mathbf{P}},~{\mathbf{P}}^{&prime;})$를 Canonical Form으로 변환하는 행렬을 $\mathbf{H}_{2}$라고 하면</b>
</p>

\begin{equation}
  \begin{aligned}
    (\mathbf{P},\mathbf{P}^{\prime})\mathbf{H}_{1}\mathbf{H} = (\tilde{\mathbf{P}},\tilde{\mathbf{P}}^{\prime})\mathbf{H}_{2}
  \end{aligned}
\end{equation}
<p>
<b>를 만족하는 Homography $\mathbf{H}$가 존재하고 이에 따라 $(\mathbf{P},\mathbf{P}^{&prime;})$과 $(~{\mathbf{P}},~{\mathbf{P}}^{&prime;})$는 사영적으로 동등하다(projectively equivalent).</b>
</p>

\begin{equation}
  \begin{aligned}
    (\mathbf{P},\mathbf{P}^{\prime}) \sim (\tilde{\mathbf{P}},\tilde{\mathbf{P}}^{\prime})
  \end{aligned}
\end{equation}
</div>
</div>
</div>

<div id="outline-container-org664ef49" class="outline-3">
<h3 id="org664ef49"><span class="section-number-3">1.6</span> Canonical cameras given F</h3>
<div class="outline-text-3" id="text-1-6">
</div>
<div id="outline-container-orgbd898e6" class="outline-4">
<h4 id="orgbd898e6"><span class="section-number-4">1.6.1</span> Result 9.12</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
<b>임의의 정방행렬 $\mathbf{F}&isin; \mathbb{R}^{3&times; 3}$가 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{&prime;})$에 대응하는 Fundemental Matrix일 필요충분 조건은 $\mathbf{P}^{&prime;\intercal}\mathbf{F}\mathbf{P}$가 반대칭 행렬(skew symmetric matrix)일 때</b> 이다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}^{\prime}\mathbf{Fx} = 0 \\
    &amp; \Leftrightarrow \mathbf{X}^{\intercal}\mathbf{P}^{\prime\intercal}\mathbf{FPX} =0 \ \ \forall \mathbf{X} \\
    &amp; \Leftrightarrow \mathbf{P}^{\prime\intercal}\mathbf{FP} \text{ is a skew symmetric matrix.}
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-org4f011de" class="outline-4">
<h4 id="org4f011de"><span class="section-number-4">1.6.2</span> Result 9.13</h4>
<div class="outline-text-4" id="text-1-6-2">
<p>
임의의 정방행렬 $\mathbf{F}&isin; \mathbb{R}^{3&times; 3}$가 주어지고 임의의 반대칭행렬 $\mathbf{S}&isin; \mathbb{R}^{3&times; 3}$이 주어졌을 때 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{&prime;})$이 다음과 같다면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = [\mathbf{I} | 0 ] \\
    &amp; \mathbf{P}^{\prime} = [\mathbf{SF} | \mathbf{e}^{\prime}]  \ \ \text{where, } \mathbf{e}^{\prime} \ \text{ is epipole.}
  \end{aligned}
\end{equation}
<p>
이 때 <b>$(\mathbf{P},\mathbf{P}^{&prime;})$는 $\mathbf{F}$를 Fundamental Matrix로 갖는다.</b>
</p>

<p>
이를 증명하기 위해 $\mathbf{P}^{&prime;}\mathbf{FP}$를 전개해보면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{P}^{\prime}\mathbf{FP} &amp; = [\mathbf{SF}|\mathbf{e}^{\prime}]^{\intercal} \mathbf{F} [\mathbf{I}|0] \\
    &amp; = \begin{bmatrix} \mathbf{F}^{\intercal}\mathbf{S}^{\intercal}\mathbf{F} &amp; \mathbf{0} \\ \mathbf{e}^{\prime}\mathbf{F} &amp; 0 \end{bmatrix} \\
    &amp; = \begin{bmatrix} \mathbf{F}^{\intercal}\mathbf{S}^{\intercal}\mathbf{F} &amp; \mathbf{0} \\ \mathbf{0} &amp; 0 \end{bmatrix} \\
  \end{aligned}
\end{equation}
<p>
과 같이 반대칭행렬이므로 위 정리에 의해 $\mathbf{F}$가 Fundamental Matrix임을 알 수 있다.
</p>

<p>
반대칭행렬 $\mathbf{S}$는 3차원 벡터 $\mathbf{s}^{\wedge}$형태로 나타낼 수 있고 이 때, $\mathbf{s}^{\intercal}\mathbf{e}^{&prime;} &ne; 0$이면 $\mathbf{P}^{&prime;} = [\mathbf{s}^{&and;}\mathbf{F}| \mathbf{e}^{&prime;}]$의 rank는 3이 된다. $\mathbf{P}^{&prime;}$의 rank가 3이 되기 위해서는 $\mathbf{s}^{&and;}\mathbf{F}, \mathbf{e}^{&prime;}$의 rank는 각각 2,1이 되어야 한다. 우선, $\mathbf{s}^{&and;}\mathbf{F}$가 rank 2라는 것을 증명해보면 Fundamental Matrix 성질에 의해 $\mathbf{e}^{&prime;}\mathbf{F}=0$을 만족하므로 $\mathbf{F}$의 열공간 Col $\mathbf{F}$와 $\mathbf{e}^{&prime;}$는 수직한다.
</p>

\begin{equation}
  \begin{aligned}
    \text{Col } \mathbf{F} \perp \mathbf{e}^{\prime}
  \end{aligned}
\end{equation}
<p>
또한, $\mathbf{s}^{&and;}\mathbf{e}^{&prime;} &ne; 0$이므로 $\mathbf{s}$는 Col $\mathbf{F}$안에 존재하지 않는다. $\mathbf{s}^{&and;}\mathbf{F}$의 열공간은
</p>

\begin{equation}
  \begin{aligned}
    \text{Col } \mathbf{s}^{\wedge}\mathbf{F} &amp; = \mathbf{s}^{\wedge} \text{Col } \mathbf{F} \\
    &amp; = \mathbf{s} \times \text{Col } \mathbf{F}
  \end{aligned}
\end{equation}
<p>
이고 <b>이 때 Col $\mathbf{F}$가 rank 2이므로 $\mathbf{s} \times \text{Col } \mathbf{F}$또한 rank 2</b> 가 된다. 다음으로 $\mathbf{e}^{&prime;}$가 다른 열벡터들과 선형독립임을 증명해보면 $\mathbf{s}^{\intercal} \text{Col }\mathbf{s}^{&and;}\mathbf{F}= 0$이고 $\mathbf{s}^{&and;}\mathbf{e}^{&prime;} &ne; 0$이므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{e}^{\prime}  \notin \text{Col } \mathbf{s}^{\wedge}\mathbf{F}
  \end{aligned}
\end{equation}
<p>
<b>결론적으로 $\mathbf{P}^{&prime;} = [\mathbf{s}^{&and;}\mathbf{F}| \mathbf{e}^{&prime;}]$의 rank는 3이 된다.</b>
</p>
</div>
</div>

<div id="outline-container-orgbee65a4" class="outline-4">
<h4 id="orgbee65a4"><span class="section-number-4">1.6.3</span> Result 9.14</h4>
<div class="outline-text-4" id="text-1-6-3">
<p>
$\mathbf{P}^{&prime;}$의 rank가 3이 되는 $\mathbf{s}$를 선택할 때 $\mathbf{e}^{&prime;}$의 수직이 아닌 $\mathbf{s}$를 사용해야 하므로 $\mathbf{s}=\mathbf{e}^{&prime;}$로 설정하면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = [\mathbf{I}|0] \\
    &amp; \mathbf{P}^{\prime} =  [\mathbf{e}^{\prime\wedge}\mathbf{F} \ | \ \mathbf{e}^{\prime}]
  \end{aligned}
\end{equation}
<p>
가 된다. <b>따라서, Fundamental Matrix $\mathbf{F}$가 주어졌을 때 $\mathbf{F}$의 Left Null Space $\mathbf{e}^{&prime;}$를 계산함으로써 카메라 대응쌍 $(\mathbf{P},\mathbf{P}^{&prime;})$를 계산할 수 있다.</b>
</p>

<p>
앞서 정의한 카메라 행렬 대응쌍의 비례식
</p>

\begin{equation}
  \begin{aligned}
    &amp; (\mathbf{P}, \mathbf{P}^{\prime})= ([\mathbf{I}|0], [\mathbf{A}|\mathbf{a}]) \\
    &amp; (\tilde{\mathbf{P}},\tilde{\mathbf{P}}^{\prime}) = ([\mathbf{I}|0],[k^{-1}(\mathbf{A}+\mathbf{av}^{\intercal}) \ | \ k\mathbf{a}]) \\
  \end{aligned}
\end{equation}
<p>
을 사용하여 일반적인 형태로 나타내면 다음과 같다.
</p>
</div>
</div>

<div id="outline-container-org2e7a826" class="outline-4">
<h4 id="org2e7a826"><span class="section-number-4">1.6.4</span> Result 9.15</h4>
<div class="outline-text-4" id="text-1-6-4">
\begin{equation}
  \begin{aligned}
    &amp; (\mathbf{P}, \mathbf{P}^{\prime})= ([\mathbf{I}|0], [\mathbf{e}^{\prime}\mathbf{F} \ | \ \mathbf{e}^{\prime}]) \\
    &amp; (\tilde{\mathbf{P}},\tilde{\mathbf{P}}^{\prime}) = ([\mathbf{I}|0],[\mathbf{e}^{\prime}\mathbf{F}+\mathbf{e}^{\prime}\mathbf{v}^{\intercal} \ | \ \lambda\mathbf{e}^{\prime}]) \\
  \end{aligned}
\end{equation}
<p>
Null Space 값인 $\mathbf{e}^{&prime;}$는 스케일에 불변하므로 $\frac{1}{k}\mathbf{e}^{&prime;}$를 이용해도 결과는 동일하다. 따라서 위와 같은 형태로 나타낼 수 있다.
</p>
</div>
</div>
</div>

<div id="outline-container-org7692670" class="outline-3">
<h3 id="org7692670"><span class="section-number-3">1.7</span> The essential matrix</h3>
<div class="outline-text-3" id="text-1-7">
<p>
임의의 카메라 행렬 $\mathbf{P}= \mathbf{K}[\mathbf{R}|\mathbf{t}]$가 주어졌을 때 이미지 평면 상의 점 $\mathbf{x}$에 대해 $\mathbf{x}= \mathbf{PX}= \mathbf{K}[\mathbf{R}|\mathbf{t}]\mathbf{X}$가 성립한다. 이 때, <b>정규화된 이미지 평면 위의 점을 $\bar{\mathbf{x}}$</b> 라고 하면
</p>

\begin{equation}
  \begin{aligned}
    \bar{\mathbf{x}} = \mathbf{K}^{-1}\mathbf{x}
  \end{aligned}
\end{equation}
<p>
가 성립한다. 이 때,
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{K}^{-1}\mathbf{P} = [\mathbf{R} | \mathbf{t}]
  \end{aligned}
\end{equation}
<p>
를 <b>정규카메라(normalized camera)</b> 라고 한다. 정규카메라에서 카메라 행렬은 $\mathbf{K}= \mathbf{I}$인 경우로 생각할 수 있다. 정규카메라 행렬의 대응쌍 $(\mathbf{P},\mathbf{P}^{&prime;})$는
</p>

\begin{equation}
  \begin{aligned}
    (\mathbf{P},\mathbf{P}^{\prime}) = ([\mathbf{I}|0], \ [\mathbf{R}|\mathbf{t}])
  \end{aligned}
\end{equation}
<p>
가 되므로 이 때 <b>Fundamental Matrix $\mathbf{F}= \mathbf{t}^{&and;}\mathbf{R}$이고 해당 행렬을 특별히 Essential Matrix $\mathbf{E}$</b> 라고 한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} = \mathbf{t}^{\wedge}\mathbf{R}
  \end{aligned}
\end{equation}
<p>
Essential Matrix은 $3\times 3$크기의 정방행렬이며 $\mathbf{E} \in \mathbb{R}^{3\times 3}$정규화된 이미지 좌표계에서 점들 간의 상간관계 $\bar{\mathbf{x}} &harr; \bar{\mathbf{x}}^{&prime;}$를 표현할 때 사용한다.
</p>

\begin{equation}
  \begin{aligned}
    \bar{\mathbf{x}}^{\prime\intercal}\mathbf{E}\bar{\mathbf{x}} = 0
  \end{aligned}
\end{equation}
<p>
이 때, $\bar{\mathbf{x}} = \mathbf{K}^{-1}\mathbf{x}, \bar{\mathbf{x}}^{&prime;} = \mathbf{K}^{-1}\mathbf{x}^{&prime;}$이므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{\prime\intercal}\mathbf{K}^{\prime-\intercal}\mathbf{E}\mathbf{K}^{-1}\mathbf{x} = 0
  \end{aligned}
\end{equation}
<p>
이 성립하여 Fundamental Matrix $\mathbf{F}$와 Essential Matrix $\mathbf{E}$의 관계는 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} = \mathbf{K}^{\prime-\intercal}\mathbf{E}\mathbf{K}^{-1}
  \end{aligned}
\end{equation}
</div>

<div id="outline-container-org7781e32" class="outline-4">
<h4 id="org7781e32"><span class="section-number-4">1.7.1</span> Properties of the essential matrix</h4>
</div>
<div id="outline-container-org5573a8b" class="outline-4">
<h4 id="org5573a8b"><span class="section-number-4">1.7.2</span> Result 9.17</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
<b>임의의 정방행렬 $\mathbf{E}&isin; \mathbb{R}^{3&times; 3}$이 Essential Matrix이기 위한 필요충분조건은 $\mathbf{E}$의 가장 큰 두 특이값 $\sigma_{1}, \sigma_{2}$값이 동일하고 세번째 특이값 $&sigma;_{3}=0$인 조건</b> 이다.
</p>
</div>
</div>

<div id="outline-container-orgece0895" class="outline-4">
<h4 id="orgece0895"><span class="section-number-4">1.7.3</span> Proof</h4>
<div class="outline-text-4" id="text-1-7-3">
<p>
카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{&prime;}) = ([\mathbf{I}|0], \ [\mathbf{R}|\mathbf{t}])$에 대한 Fundamental Matrix $\mathbf{F}$가 있다고 하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} = \mathbf{t}^{\wedge}\mathbf{R} = \mathbf{SR}
  \end{aligned}
\end{equation}
<p>
이 된다. 직교행렬 $\mathbf{W}$와 반대칭행렬 $\mathbf{Z}$를 다음과 같이 정의하면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{W} = \begin{bmatrix} 0&amp;-1&amp; \\ 1&amp;0&amp; \\ &amp;&amp;1 \end{bmatrix} \\
    &amp; \mathbf{Z} = \begin{bmatrix} 0&amp;1&amp; \\ -1&amp;0&amp; \\ &amp;&amp;0 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
두 행렬은 $\mathbf{Z} = \begin{bmatrix} 1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}\mathbf{W}$관계가 성립한다. 반대칭행렬 $\mathbf{S}$가 rank 2를 가지는 경우 $\mathbf{S}$는 항상 기저(basis)를 변경하여 $\mathbf{Z}$의 형태로 변경할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{S} \sim \mathbf{U}\mathbf{Z}\mathbf{U}^{\intercal}
  \end{aligned}
\end{equation}
<p>
이를 사용하여 Fundamental Matrix $\mathbf{F}$를 전개하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} &amp; = \mathbf{SR} \\
    &amp; = \mathbf{UZU}^{\intercal}\mathbf{R} \\
    &amp; = \mathbf{UZWW}^{\intercal}\mathbf{U}^{\intercal}\mathbf{R} \ \ (\because \ \mathbf{WW}^{\intercal} = \mathbf{I})\\
    &amp; = \mathbf{UZW}(\mathbf{W}^{\intercal}\mathbf{U}^{\intercal}\mathbf{R})
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{W}^{\intercal}\mathbf{U}^{\intercal}\mathbf{R}$은 직교행렬(orthogonal matrix)이 되고 $\mathbf{ZW}= \begin{bmatrix}1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}$이 된다. 따라서 Fundamental Matrix $\mathbf{F}$를 특이값 분해(SVD)하면
</p>


\begin{equation}
  \begin{aligned}
    \mathbf{F} &amp; = \mathbf{U}\mathbf{D}\mathbf{V}^{\intercal}  \sim \mathbf{U} \begin{bmatrix} 1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix} \mathbf{V}^{\intercal}
  \end{aligned}
\end{equation}
<p>
꼴이 되므로 <b>$\mathbf{F}$의 가장 큰 두 특이값은 같으며 마지막 특이값은 0이 된다. 이에 따라 Fundamental Matrix $\mathbf{F}$는 Essential Matrix $\mathbf{E}$의 성질을 만족하므로 Essential Matrix</b> 가 된다.
</p>

<p>
반대로 임의의 정방행렬 $\mathbf{E}&isin; \mathbb{R}^{3&times; 3}$의 특이값 분해(SVD)가
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} \sim \mathbf{U} \begin{bmatrix} 1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}\mathbf{V}^{\intercal}
  \end{aligned}
\end{equation}
<p>
을 만족하는 경우 이는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} &amp; \sim \mathbf{U} \begin{bmatrix} 1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}\mathbf{V}^{\intercal} \\
     &amp; = \mathbf{UZWW}^{\intercal}\mathbf{V} \\
     &amp; = \mathbf{UZU}^{\intercal}(\mathbf{UWW}^{\intercal}\mathbf{V}^{\intercal}) \\
     &amp; = \mathbf{SR} \\
     &amp; = \mathbf{e}^{\wedge} \mathbf{R}
  \end{aligned}
\end{equation}
<p>
이 된다. 따라서 <b>이 때 $\mathbf{E}$는 카메라 행렬 대응쌍 $(\mathbf{P}, \mathbf{P}^{&prime;}) = ([\mathbf{I}|0], [\mathbf{e}|\mathbf{R}])$에 대응하는 Fundamental Matrix가 된다.</b>
</p>
</div>
</div>
</div>

<div id="outline-container-org6a4d981" class="outline-3">
<h3 id="org6a4d981"><span class="section-number-3">1.8</span> Extraction of cameras from the essential matrix</h3>
<div class="outline-text-3" id="text-1-8">
</div>
<div id="outline-container-org232b3f3" class="outline-4">
<h4 id="org232b3f3"><span class="section-number-4">1.8.1</span> Result 9.18</h4>
<div class="outline-text-4" id="text-1-8-1">
<p>
Essential Matrix $\mathbf{E}$가 다음과 같이 주어졌을 때
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} = \mathbf{U}\begin{bmatrix} 1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}\mathbf{V}^{\intercal}
  \end{aligned}
\end{equation}
<p>
행렬 $\mathbf{E}$는 SR Factorization을 통해 $\mathbf{R}, \mathbf{t}$를 분해할 수 있다. 이 때, <b>$\mathbf{E}$는 서로 부호가 다른 두 개의 SR Factorization 해를 가진다(up to sign).</b>
</p>
</div>
</div>

<div id="outline-container-orga2f917f" class="outline-4">
<h4 id="orga2f917f"><span class="section-number-4">1.8.2</span> Proof</h4>
<div class="outline-text-4" id="text-1-8-2">
<p>
행렬 $\mathbf{E}$는 다음과 같이 분해할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} &amp; \sim \mathbf{U} \begin{bmatrix} 1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}\mathbf{V}^{\intercal} \\
     &amp; = \mathbf{UZWW}^{\intercal}\mathbf{V} \\
     &amp; = \mathbf{UZU}^{\intercal}(\mathbf{UWW}^{\intercal}\mathbf{V}^{\intercal}) \\
     &amp; = \mathbf{SR} 
  \end{aligned}
\end{equation}
<p>
이 때, 직교행렬 $\mathbf{W}= \begin{bmatrix}0&amp;-1&amp; \\ 1&amp;0&amp; \\ &amp;&amp;1 \end{bmatrix}$이고 $\mathbf{W}^{\intercal} = \begin{bmatrix}0&amp;1&amp; \\ -1&amp;0&amp; \\ &amp;&amp;1 \end{bmatrix}$일 때 $\mathbf{W}^{\intercal} = \begin{bmatrix} -1&amp;&amp; \\ &amp;-1&amp; \\ &amp;&amp;1 \end{bmatrix}\mathbf{W}$관계가 성립한다. 따라서 <b>대각행렬 $\begin{bmatrix}1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}$은 $\mathbf{ZW}= -\mathbf{ZW}^{\intercal}$와 같이 부호가 다른 두 개의 행렬로 분해가 가능</b> 하다.
</p>

<p>
따라서 Essential Matrix $\mathbf{E}$는 다음과 같이 2개의 행렬로 분해가 가능하다.
</p>
\begin{equation}
  \begin{aligned}
    \mathbf{E} &amp; = (\mathbf{UZU}^{\intercal})(\mathbf{UWV}^{\intercal}) = \mathbf{S}_{0}\mathbf{R}_{0}\\
    &amp; = (\mathbf{UZU}^{\intercal})(\mathbf{UW}^{\intercal}\mathbf{V}^{\intercal}) =\mathbf{S}_{0}\mathbf{R}_{0}^{\prime}\\
  \end{aligned}
\end{equation}
<p>
Essential Matrix $\mathbf{E}$가 위 두 가지 케이스로만 분해된다는 것을 증명하려면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} = \mathbf{S}_{0}\mathbf{R}_{0} = \mathbf{SR}
  \end{aligned}
\end{equation}
<p>
에 대하여 $\mathbf{S}= \mathbf{S}_{0}, \mathbf{R}= \mathbf{R}_{0}, \mathbf{R}_{0}^{&prime;}$임을 증명해야 한다.
</p>

<p>
반대칭행렬 $\mathbf{S}, \mathbf{S}_{0}$는 rank가 2인 행렬이므로 $\mathbf{S}_{0}^{\intercal} = \mathbf{s}^{&and;}, \mathbf{S}^{\intercal} = \mathbf{s}^{&and;}$과 같이 벡터 형태로 나타낼 수 있고
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{s}, \mathbf{s}_{0} \in \text{Nul } \mathbf{E}^{\intercal}
  \end{aligned}
\end{equation}
<p>
과 같이 $\mathbf{E}$의 Left Null Space에 포함된다. 따라서 $\mathbf{s}, \mathbf{s}_{0}$는 비례관계가 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{s} = \alpha \mathbf{s}_{0} \ \ \ \alpha \neq 0 \in \mathbb{R}
  \end{aligned}
\end{equation}
<p>
위 식에 따라 $\mathbf{SR}= &alpha; \mathbf{S}_{0}\mathbf{R}_{0}$이 성립하고 <b>이 때 $\| \mathbf{R}\| = \| \mathbf{R}_{0} \| = 1$이므로 Frobenius Norm을 비교해보면 $&alpha; = &plusmn; 1$인 것</b> 을 알 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{S} = \pm \mathbf{S}_{0}
  \end{aligned}
\end{equation}
<p>
다음으로 $\mathbf{R}= \mathbf{R}_{0}, \mathbf{R}_{0}^{&prime;}$라는 것을 증명한다. 지금까지 구한 결과에 따라 Essential Matrix $\mathbf{E}$는 다음과 같이 쓸 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} &amp; = \mathbf{U} \begin{bmatrix} 1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix} \mathbf{V}^{\intercal} = \mathbf{S}_{0}\mathbf{R} = \mathbf{S}_{0}(\mathbf{UXV}^{\intercal}) \quad \text{where, } \mathbf{X} = \mathbf{U}^{\intercal}\mathbf{RV} \\
    &amp; = \mathbf{U}(\mathbf{ZX})\mathbf{V}^{\intercal}
  \end{aligned}
\end{equation}
<p>
이 때 $\mathbf{ZX}= \begin{bmatrix}1&amp;&amp; \\ &amp;1&amp; \\ &amp;&amp;0 \end{bmatrix}= \begin{bmatrix}0&amp;1&amp; \\ -1&amp;0&amp; \\ &amp;&amp;0 \end{bmatrix}\mathbf{X}$이므로 이를 전개하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{X} &amp; = \begin{bmatrix} 0&amp;-1&amp; \\ 1&amp;0&amp; \\ &amp;&amp;\pm1 \end{bmatrix} \\
    &amp; = \mathbf{W} = -\mathbf{W}^{\intercal}
  \end{aligned}
\end{equation}
<p>
이므로 <b>따라서 부호의 변화를 포함한(up to sign) $\mathbf{R}= \mathbf{R}_{0}, \mathbf{R}_{0}^{&prime;}$가 성립한다.</b>
</p>
</div>
</div>
</div>

<div id="outline-container-org09ea3fb" class="outline-3">
<h3 id="org09ea3fb"><span class="section-number-3">1.9</span> Geometrical interpretation of the four solutions</h3>
<div class="outline-text-3" id="text-1-9">

<figure>
<img src="/pictures/200607_mvg/51.png" alt="51.png" align="center" width="600px">

</figure>

<p>
Essential Matrix $\mathbf{E}$는 다음과 같이 나타낼 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{X} &amp; = \begin{bmatrix} 0&amp;-1&amp; \\ 1&amp;0&amp; \\ &amp;&amp;\pm1 \end{bmatrix} \\
    &amp; = \mathbf{S}_{0}\mathbf{R}_{0}
  \end{aligned}
\end{equation}
<p>
여기서 반대칭행렬 $\mathbf{S}_{0}^{\intercal} = \mathbf{s}_{0}^{&and;}$에서 $\mathbf{s}_{0}$는 $\mathbf{E}$의 Left Null Space에 포함된다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{s}_{0} \in \text{Nul }\mathbf{E}^{\intercal}
  \end{aligned}
\end{equation}
<p>
이 때, <b>$\mathbf{s}_{0}$는 행렬 $\mathbf{U}$의 세 번째 열(third column)인 $\mathbf{u}_{3}$가 된다.</b>
</p>

<p>
$\mathbf{E}= \mathbf{t}^{&and;}\mathbf{R}$을 어떻게 분해하느냐에 따라 총 네 가지 해가 존재한다. 우선 $\mathbf{t}$를 보면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{t} = \pm \mathbf{u}_{3}
  \end{aligned}
\end{equation}
<p>
이는 두 카메라 $\mathbf{C}, \mathbf{C}^{&prime;}$가 주어졌을 때 어느 카메라를 원점으로 잡는가에 따라 두 가지 해가 존재함을 의미한다. 다음으로 $\mathbf{R}$을 보면, $\mathbf{R}= \mathbf{UW}^{\intercal}\mathbf{V}^{\intercal}$인 경우
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} = [\mathbf{UW}^{\intercal}\mathbf{V}^{\intercal} \ | \ \mathbf{u}_{3}]
  \end{aligned}
\end{equation}
<p>
가 되고 이를 다시 쓰면 
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{E} &amp; = [\mathbf{UW}^{\intercal}\mathbf{V}^{\intercal} \ | \ \mathbf{u}_{3}] \\
    &amp; = [\mathbf{UWV}^{\intercal}(\mathbf{V}\mathbf{W}^{\intercal}\mathbf{W}^{\intercal}\mathbf{V}^{\intercal})\ | \ \mathbf{u}_{3}] \\
    &amp; = [\mathbf{UW}^{\intercal}\mathbf{V} \ | \ \mathbf{u}_{3}] \begin{bmatrix} \mathbf{VW}^{\intercal}\mathbf{W}^{\intercal}\mathbf{V}^{\intercal} &amp; \\ &amp; 1 \end{bmatrix} \\
    &amp; = [\mathbf{UW}^{\intercal}\mathbf{V} \ | \ \mathbf{u}_{3}] \begin{bmatrix} \mathbf{V}\begin{pmatrix} -1&amp;&amp; \\&amp;-1&amp; \\&amp;&amp;1 \end{pmatrix}\mathbf{V}^{\intercal} &amp; \\ &amp; 1 \end{bmatrix} \\
  \end{aligned}
\end{equation}
<p>
이 성립한다. 이 때 $\mathbf{VW}^{\intercal}\mathbf{W}^{\intercal}\mathbf{V}^{\intercal}$는 Baseline의 수직한 방향 2개를 상하대칭하는 행렬이 된다. 즉, <b>Baseline을 축으로 180 degree 회전하는 형태</b> 가 된다.
</p>
</div>
</div>
</div>

<div id="outline-container-orgccda7b5" class="outline-2">
<h2 id="orgccda7b5"><span class="section-number-2">2</span> 3D Reconstruction of Cameras and Structure</h2>
<div class="outline-text-2" id="text-2">

<figure>
<img src="/pictures/200607_mvg/52.png" alt="52.png" align="center" width="700px">

</figure>

<p>
이전 섹션에서 언급했듯이 <b>Fundamental Matrix $\mathbf{F}$는 여러 카메라 행렬 대응쌍 $(\mathbf{P}, \mathbf{P}^{&prime;})$에 대하여 사영모호성(projective ambiguity)이 존재하기 때문에 결과물인 $\mathbf{P}, \mathbf{P}^{&prime;}$를 통해 계산한 3차원 공간 상의 점 또한 모호성을 가지게 된다.</b> 해당 섹션에서는 Scene Constraint와 Internal Constraint를 사용하여 모호성을 제거하는 방법에 대해서 설명한다.
</p>
</div>

<div id="outline-container-org2fccbfa" class="outline-3">
<h3 id="org2fccbfa"><span class="section-number-3">2.1</span> The projective reconstruction theorem</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-org0ef5eb4" class="outline-4">
<h4 id="org0ef5eb4"><span class="section-number-4">2.1.1</span> Theorem 10.1 (Projective reconstruction theorem)</h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
두 카메라의 이미지 평면 상 대응쌍 점들인 $\mathbf{x}, \mathbf{x}^{&prime;}$이 충분히 주어져서 이를 통해 Fundamental Matrix $\mathbf{F}$를 구했다고 가정해보자. 이 때, 사영모호성으로 인해 다음과 같은 두 카메라 행렬 대응쌍
</p>

\begin{equation}
  \begin{aligned}
    &amp; (\mathbf{P}_{1}, \mathbf{P}_{1}^{\prime}, \{\mathbf{X}_{1,i}\}) \\
    &amp; (\mathbf{P}_{2}, \mathbf{P}_{2}^{\prime}, \{\mathbf{X}_{2,i}\}) \\
  \end{aligned}
\end{equation}
<p>
이 동일한 Fundamental Matrix $\mathbf{F}$를 갖게 되는 경우 
</p>

\begin{equation}
  \begin{aligned}
    &amp; (\mathbf{P}_{2}, \mathbf{P}_{2}^{\prime}, \{\mathbf{X}_{2,i}\}) = \mathbf{H}\cdot (\mathbf{P}_{1}, \mathbf{P}_{1}^{\prime}, \{\mathbf{X}_{1,i}\})  \\
  \end{aligned}
\end{equation}
<p>
를 만족하는 Homography 행렬 $\mathbf{H}&isin; \text{PGL}_{4}$가 반드시 존재한다. 이 때 $\cdot$연산은 다음과 같이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P}_{2} = \mathbf{H}\cdot\mathbf{P}_{1} = \mathbf{P}_{1}\mathbf{H}^{-1} \\
    &amp; \mathbf{P}_{2}^{\prime} = \mathbf{H}\cdot\mathbf{P}_{1}^{\prime} = \mathbf{P}_{1}^{\prime}\mathbf{H}^{-1} \\
    &amp;\mathbf{X}_{2i} = \mathbf{H}\cdot \mathbf{X}_{1i} = \mathbf{H}\mathbf{X}_{1i}
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-orga175d7a" class="outline-4">
<h4 id="orga175d7a"><span class="section-number-4">2.1.2</span> Proof</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
이전 섹션에서 동일한 Fundamental Matrix $\mathbf{F}$를 공유하는 카메라 행렬 대응쌍 사이에 $\mathbf{P}_{2} = \mathbf{P}_{1}\mathbf{H}^{-1}, \mathbf{P}_{2}^{&prime;} =\mathbf{P}_{1}^{&prime;}\mathbf{H}^{-1}$를 만족하는 Homography 행렬 $\mathbf{H}&isin; \mathbb{R}^{4&times; 4}$가 존재한다는 것을 증명하였다. 이를 적용해보면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P}_{2}\mathbf{X}_{2i} = \mathbf{P}_{1}\mathbf{H}^{-1}\mathbf{X}_{2i} = \mathbf{x}_{i} = \mathbf{P}_{1}\mathbf{X}_{1i} \\
    &amp; \mathbf{P}_{2}^{\prime}\mathbf{X}_{2i} = \mathbf{P}_{1}^{\prime}\mathbf{H}^{-1}\mathbf{X}_{2i} = \mathbf{x}_{i}^{\prime} = \mathbf{P}_{1}^{\prime}\mathbf{X}_{1i}
  \end{aligned}
\end{equation}
<p>
가 성립한다. $\mathbf{P}_{1}, \mathbf{P}_{2}$에 의해 Back Projection된 직선을 $\mathcal{R}$이라고 하고 $\mathbf{P}_{1}^{&prime;}, \mathbf{P}_{2}^{&prime;}$에 의해 Back Projection된 직선을 $\mathcal{R}^{&prime;}$이라고 하면
</p>

\begin{equation}
  \begin{aligned}
    \{\mathbf{H}^{-1}\mathbf{X}_{2i}, \mathbf{X}_{1i}\} \in \mathcal{R} \cap \mathcal{R}^{\prime}
  \end{aligned}
\end{equation}
<p>
와 같이 3차원 공간 상의 점 $\{\mathbf{H}^{-1}\mathbf{X}_{2i}, \mathbf{X}_{1i}\}$는 두 직선의 교차점이 된다. 따라서 <b>두 직선 $\mathcal{R}, \mathcal{R}^{&prime;}$이 Baseline과 같이 동일한 직선인 경우를 제외하면 $\{\mathbf{H}^{-1}\mathbf{X}_{2i}, \mathbf{X}_{1i}\}$는 교차점인 한 점을 의미</b> 하므로
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{H}^{-1}\mathbf{X}_{2i} = \mathbf{X}_{1i} \\
    &amp; \mathbf{X}_{2i} = \mathbf{H}\mathbf{X}_{1i}
  \end{aligned}
\end{equation}
<p>
가 성립한다. 따라서 추가적인 기하학적 원리를 사용하지 않으면 위와 같은 상황에서는 사영기하의 특성까지(up to projectivity) 복원할 수 있다.
</p>
</div>
</div>
</div>

<div id="outline-container-org2ba7b16" class="outline-3">
<h3 id="org2ba7b16"><span class="section-number-3">2.2</span> Stratified reconstruction</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Fundamental Matrix $\mathbf{F}$를 사용하여 계산한 카메라 행렬 대응쌍 $(\mathbf{P}, \mathbf{P}^{&prime;})$의 사영모호성 문제를 해결하기 위해 Ground Truth 카메라 행렬 대응쌍인
</p>

\begin{equation}
  \begin{aligned}
    (\mathbf{P}_{0}, \mathbf{P}_{0}^{\prime}, \{\hat{\mathbf{X}_{i}}\})
  \end{aligned}
\end{equation}
<p>
이 존재한다고 가정하면
</p>

\begin{equation}
  \begin{aligned}
    &amp; (\mathbf{P}_{1}, \mathbf{P}_{1}^{\prime}, \{\mathbf{X}_{i}\}) = \mathbf{H}\cdot(\mathbf{P}_{0}, \mathbf{P}_{0}^{\prime}, \{\hat{\mathbf{X}_{i}}\}) \\
    &amp; \mathcal{T} = \mathbf{H}\cdot \mathcal{T}_{0}
  \end{aligned}
\end{equation}
<p>
을 만족하는 Homography 행렬 $\mathbf{H}$가 존재한다. 이 때, 이미지 평면 상에서 평행한 직선의 특성을 활용하여 Affine Reconstruction을 수행한 다음, 이미지 평면 상에서 직교한 선들의 특성을 사용하여 Similarity Reconstruction을 순차적으로 수행한다.
</p>
</div>

<div id="outline-container-orgf85d5c4" class="outline-4">
<h4 id="orgf85d5c4"><span class="section-number-4">2.2.1</span> The step to affine reconstruction</h4>
<div class="outline-text-4" id="text-2-2-1">

<figure>
<img src="/pictures/200607_mvg/53.png" alt="53.png" align="center" width="700px">

</figure>

<p>
Affine Reconstruction 단계에서는 평행한 직선들의 특성을 보존하는 Homography 행렬 $\mathbf{H}_{A}$를 찾아야 한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{A}(\pi_{\infty}) = \pi_{\infty}
  \end{aligned}
\end{equation}
<p>
3차원 공간 상의 점들의 집합 $\{\mathbf{X}_{i}\}$를 사용하여 소실점을 3개 이상 구한 경우 이미지 평면에 투영된 무한대 평면 $&pi;_{&infin;}^{&prime;}$를 계산할 수 있다. 이미지 평면 상에 투영된 무한대 평면 $&pi;_{&infin;}^{&prime;}$를
</p>

\begin{equation}
  \begin{aligned}
    \pi_{\infty}^{\prime} = \begin{bmatrix} a &amp; b &amp; c &amp; 1  \end{bmatrix}^{\intercal}
  \end{aligned}
\end{equation}
<p>
라고 하면 실제 무한대 평면 $&pi;_{&infin;} = \begin{pmatrix}0&amp;0&amp;0&amp;1 \end{pmatrix}^{\intercal}$을 $&pi;_{&infin;}^{&prime;}$로 보내는 Homography 행렬 $\mathbf{H}_{A}$는 다음과 같이 구할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{A} = \begin{bmatrix} &amp;\mathbf{I}_{3}&amp; &amp; 0 \\ a&amp;b&amp;c&amp;1 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
이 때 $\mathbf{H}_{A}^{\intercal}\pi_{\infty} = \pi_{\infty}^{\prime}$관계가 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \pi_{\infty}  = \mathbf{H}_{A}^{-1} \pi_{\infty}^{\prime}
  \end{aligned}
\end{equation}
<p>
이를 $\mathcal{T}$에 적용하면 
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathcal{T}_{a} = \mathbf{H} \cdot \mathcal{T} \\
    &amp; (\mathbf{PH}_{a}^{-1}, \mathbf{P}^{\prime}\mathbf{H}_{A}^{-1}, \{\mathbf{H}_{A}\mathbf{X}_{i}\}) = \mathbf{H} \cdot (\mathbf{P}, \mathbf{P}^{\prime}, \{\mathbf{X}_{i}\})
  \end{aligned}
\end{equation}
<p>
연산을 통해 이미지를 Affine Reconstruction할 수 있다. 여기까지 진행했다면 Ground Truth $\mathcal{T}_{0}$와 $\mathcal{T}_{a}$는 Affine만큼만 차이가 나게 된다. 즉, 평행한 직선들은 모두 복원되었으나 아직 직교한 직선들은 복원되지 않은 상태이다.
</p>
</div>
</div>


<div id="outline-container-orge1997aa" class="outline-4">
<h4 id="orge1997aa"><span class="section-number-4">2.2.2</span> The step to metric reconstruction</h4>
<div class="outline-text-4" id="text-2-2-2">
<p>
Metric Reconstruction 단계에서는 직교하는 선들을 보존하는 Homography 행렬 $\mathbf{H}_{S}$를 찾아야 한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{S}(\Omega_{\infty}) = \Omega_{\infty}
  \end{aligned}
\end{equation}
<p>
이 때, $&Omega;_{&infin;}$는 무한대 평면상에 존재하는 Absolute Conic을 의미한다. Affine Reconstruction 단계에서 얻은 $\mathcal{T}_{a}$는 무한대 평면 $&pi;_{&infin;}$가 실제 무한대에 위치하게 된다. 이 때, $\{\mathbf{X}_{i}\}$들 중 직교하는 점들을 사용하여 $&Omega;_{&infin;}$를 구할 수 있다. 직교하는 점들의 대응쌍을 $\mathbf{d}_{1}, \mathbf{d}_{2}$라고 하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{d}_{1}^{\intercal}\omega \mathbf{d}_{2} = 0
  \end{aligned}
\end{equation}
<p>
을 만족하는 $&omega;$를 찾을 수 있고 $&omega;$는 이미지 평면 상에 투영된 Absolute Conic $&Omega;_{&infin;}$가 된다.
</p>

<p>
카메라 행렬 $\mathbf{P}= \mathbf{K}[\mathbf{R}| \mathbf{t}] = [\mathbf{M}\ | \ \mathbf{m}]$가 주어졌을 때 무한대 평면 $&pi;_{&infin;}$는 $\mathbf{M}$에 의해 이미지 평면 $&pi;$에 투영된다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{M}: \pi_{\infty} \mapsto \pi
  \end{aligned}
\end{equation}
<p>
반대로 $\mathbf{M}^{-1}$는 $\pi$평면 상의 점들을 무한대 평면 $&pi;_{&infin;}$으로 보내는 매핑이라고 할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{M}^{-1}: \pi \mapsto \pi_{\infty}
  \end{aligned}
\end{equation}
<p>
이 때, 이미지 평면에 투영된 Absolute Conic에 $\mathbf{M}^{-1}$을 적용하면 $\mathbf{M}^{-1}(&omega;) = ~{&Omega;}_{&infin;}$가 된다. $~{&Omega;}_{&infin;}$는 아직 Metric Reconstruction이 되기 전이므로 $&Omega;_{&infin;} &ne; ~{&Omega;}_{&infin;}$이다. 둘 사이에는 다음 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{S}(\tilde{\Omega}_{\infty}) = \Omega_{\infty} = \mathbf{I}_{3}
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-org37ab3f7" class="outline-4">
<h4 id="org37ab3f7"><span class="section-number-4">2.2.3</span> Result 10.5</h4>
<div class="outline-text-4" id="text-2-2-3">
<p>
이미지 평면에 프로젝션된 Absolute Conic을 $&omega;$라고 하고 Affine Reconstruction으로 구한 카메라 행렬을 $\mathbf{P}=[\mathbf{M}\ | \ \mathbf{m}]$이라고 할 때 Metric Reconstruction을 수행하는 Homography $\mathbf{H}_{S}$는 다음과 같이 구할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{S} = \begin{bmatrix} \mathbf{A}^{-1} &amp; \\ &amp; 1 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
이 때, $\mathbf{AA}^{\intercal} = (\mathbf{M}^{\intercal}&omega; \mathbf{M})^{-1}$이고 $\mathbf{A}$는 이를 Cholesky Decomposition을 통해 얻을 수 있다.
</p>
</div>
</div>

<div id="outline-container-org2abbe90" class="outline-4">
<h4 id="org2abbe90"><span class="section-number-4">2.2.4</span> Proof</h4>
<div class="outline-text-4" id="text-2-2-4">
<p>
Metric Reconstruction을 수행하는 Homography $\mathbf{H}_{S} = \begin{bmatrix}\mathbf{A}^{-1} &amp; \\ &amp; 1 \end{bmatrix}$이라고 하고 이 때 이미지 평면을 $\pi_{s}$, 카메라 행렬을 $\mathbf{P}_{s}$라고 하면 $\mathbf{H}_{S}(\pi) = \pi_{s}$관계가 성립하고 무한대 평면을 Homography 변환한 공식은
</p>

\begin{equation}
  \begin{aligned}
    &amp; \pi_{\infty} \mathbf{A}^{-1} = \pi_{\infty,s} \\ 
    &amp; \mathbf{H}_{S}|_{\pi_{\infty}} = \mathbf{A}^{-1} \\
  \end{aligned}
\end{equation}
<p>
가 된다. 각각 무한대 평면 $&pi;_{&infin;}, &pi;_{&infin;,s}$을 이미지 평면 $&pi;, &pi;_{s}$에 투영하는 공식은
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P}|_{\pi_{\infty}} = \mathbf{M} \\
    &amp; \mathbf{P}_{s}|_{\pi_{\infty}} = \mathbf{MA}
  \end{aligned}
\end{equation}
<p>
과 같이 변형된다. 따라서 $\mathbf{H}_{S}(~{&Omega;}_{&infin;})$는 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{S}(\tilde{\Omega}_{\infty}) &amp; = (\mathbf{A}^{-1})^{-\intercal} \tilde{\Omega}_{\infty} \mathbf{A} \\
    &amp; = \mathbf{A}^{\intercal} (\mathbf{M}^{\intercal}\omega \mathbf{M})\mathbf{A}  
  \end{aligned}
\end{equation}
<p>
따라서 Absolute Conic 특성에 의해 $\mathbf{A}^{\intercal} (\mathbf{M}^{\intercal}&omega; \mathbf{M})\mathbf{A}$는 $\mathbf{I}$이 되어야 하므로
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{A}^{\intercal} (\mathbf{M}^{\intercal}\omega \mathbf{M})\mathbf{A} = \mathbf{I} \\
    &amp; (\mathbf{M}^{\intercal} \omega \mathbf{M})^{-1} = \mathbf{AA}^{\intercal} 
  \end{aligned}
\end{equation}
<p>
가 성립한다. 결론적으로 $\mathbf{H}_{S} = \begin{bmatrix}\mathbf{A}^{-1} &amp; \\ &amp; 1 \end{bmatrix}$를 구하기 위해서는 <b>이미지 평면 상에서 직교하는 직선들의 특성을 사용하여 $&omega;$를 구한 후, $(\mathbf{M}^{\intercal} &omega; \mathbf{M})^{-1}$를 Cholesky Decomposition하여 $\mathbf{AA}^{\intercal}$를 구한다. 이를 통해 $\mathbf{A}^{-1}$값을 구할 수 있고 최종적으로 Metric Reconstruction을 수행하는 Homography $\mathbf{H}_{S}$를 구할 수 있다.</b>
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org5cd7166" class="outline-2">
<h2 id="org5cd7166"><span class="section-number-2">3</span> Computation of the Fundamental Matrix $\mathbf{F}$</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgb2e606f" class="outline-3">
<h3 id="orgb2e606f"><span class="section-number-3">3.1</span> Basic equations</h3>
<div class="outline-text-3" id="text-3-1">
<p>
두 카메라의 대응점쌍 $\mathbf{x}&harr; \mathbf{x}^{&prime;}$이 존재할 때
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{\prime\intercal}\mathbf{Fx} = 0
  \end{aligned}
\end{equation}
<p>
을 만족하는 3x3 크기의 행렬 $\mathbf{F}$를 Fundamental Matrix라고 한다. 만약 세 개의 대응점쌍 $\mathbf{x} = (\mathbf{x}_{1}, \mathbf{x}_{2}, \mathbf{x}_{3})$, $\mathbf{x}^{&prime;} = (\mathbf{x}_{1}^{&prime;}, \mathbf{x}_{2}^{&prime;}, \mathbf{x}_{3}^{&prime;})$이 주어졌을 때 $\mathbf{x}^{&prime;\intercal}\mathbf{Fx}=0$이를 다시 정리하면 $&sum; \mathbf{x}^{&prime;}_{i}\mathbf{x}_{j}\mathbf{f}_{ij}=0$과 같이 정리할 수 있다. 해당 식은 선형시스템
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{A} \mathbf{f} = 0
  \end{aligned}
\end{equation}
<p>
꼴로 나타낼 수 있고 이 때 $\mathbf{A}$와 $\mathbf{f}$를 풀어쓰면 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{A} = (\mathbf{a}_{ik}) \in \mathbb{R}^{N \times 9}, \ \ \text{i-th row is} \ (\mathbf{x}_{1}^{\prime i}\mathbf{x}_{1}^{i}, \mathbf{x}_{1}^{\prime i}\mathbf{x}_{2}^{i},\cdots, \mathbf{x}_{3}^{\prime i}\mathbf{x}_{3}^{i}) \\
    &amp; \mathbf{f} = (\mathbf{f}_{11}, \mathbf{f}_{12}, \mathbf{f}_{13}, \cdots, \mathbf{f}_{33})^{\intercal} \in \mathbb{R}^{9\times 1}
  \end{aligned}
\end{equation}
<p>
만약 주어진 대응점쌍의 개수 $N$이 8보다 크고 노이즈가 없는 완벽한 데이터로 생성이 되었으면 $\mathbf{A}$는 rank 8 행렬이 되고 유일한 해 $\mathbf{f}$가 존재한다. 이 때 $\mathbf{f}$는 $\mathbf{A}$의 Null Space의 원소가 된다.
</p>

<p>
하지만 대부분의 경우 주어진 데이터에는 항상 노이즈가 존재하므로 $\mathbf{A}$행렬은 rank 9인 full rank 행렬이 된다. 이 때 해를 구하면 $\mathbf{f}$는 항상 영벡터가 계산되므로 $\| \mathbf{f}\| = 1$이라는 조건하에 $\|\mathbf{Af}\|$의 크기를 최소화하는 근사해 $\mathbf{f}$를 찾아야 한다. 해를 찾는 방법은 $\mathbf{A}$를 특이값 분해(SVD)한 다음
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{A} = \mathbf{UDV}^{\intercal}
  \end{aligned}
\end{equation}
<p>
대각행렬 $\mathbf{D}$의 eigenvalue 중 가장 절대값이 작은 것에 대응되는 $\mathbf{V}$의 열벡터를 $\mathbf{f}$의 일반해로 간주한다. 해당 열벡터 $\mathbf{f}$가 $\|\mathbf{Af}\|$의 크기를 최소화하는 벡터가 되며 이를 Linear Solution이라고 부른다.
</p>

<p>
하지만 <b>이 때, Linear Solution $\mathbf{f}$로 복원한 $\mathbf{F}_{0}$가 rank 2 행렬임을 보장할 수 없다.</b> 수치적으로 해를 구하면 일반적으로 rank 3인 행렬이 나온다. 따라서 한 번 더 SVD를 사용하여 $\mathbf{F}_{0}$와 가장 가까운 rank 2 행렬을 찾아야 한다.
</p>


\begin{equation}
  \begin{aligned}
    \mathbf{F}_{0} = \mathbf{U}_{0}\mathbf{D}_{0}\mathbf{V}^{\intercal}_{0}
  \end{aligned}
\end{equation}
<p>
이 때 대각행렬 $\mathbf{D}_{0} = \begin{bmatrix}&sigma;_{1}&amp;&amp; \\ &amp;&sigma;_{2}&amp; \\  &amp;&amp;&sigma;_{3} \end{bmatrix}$는 일반적으로 마지막 특이값 $&sigma;_{3}$가 0이 아니므로 rank 3인 행렬이 된다. 따라서 <b>임의로 $&sigma;_{3}=0$으로 변경한 행렬이 $\mathbf{F}_{0}$과 가장 가까운 rank 2 행렬이 된다.</b>
</p>
</div>

<div id="outline-container-org28334a6" class="outline-4">
<h4 id="org28334a6"><span class="section-number-4">3.1.1</span> The minimum case - seven point correspondences</h4>
<div class="outline-text-4" id="text-3-1-1">
<p>
7개의 대응점쌍이 주어진 경우 $\mathbf{A}&isin; \mathbb{R}^{7&times; 9}$인 rank 7 행렬이 된다. 이에 따라 Null Space의 차원이 2가 되므로 무수한 해가 존재한다. $\mathbf{Af}=0$의 풀어서 두 개의 선형독립인 Fundamental Matrix $\mathbf{F}_{1}, \mathbf{F}_{2}$를 구하고 
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} = \alpha \mathbf{F}_{1} + (1-\alpha)\mathbf{F}_{2}
  \end{aligned}
\end{equation}
<p>
를 통해 $\mathbf{F}$를 구한다. $\mathbf{F}$행렬의 rank는 2이므로 $det(\mathbf{F})=0$을 만족하게 되고 이에 따라 $&alpha;$에 대한 3차 방정식을 얻는다. 3차 방정식이 세 개의 실수해를 가지는 경우는 Degenerate Configuration이 된다.
</p>
</div>
</div>
</div>



<div id="outline-container-org5576fa1" class="outline-3">
<h3 id="org5576fa1"><span class="section-number-3">3.2</span> The normalized 8-point algorithm</h3>
<div class="outline-text-3" id="text-3-2">
<p>
행렬 $\mathbf{A}$는 주어진 대응점쌍 $\mathbf{x}&harr; \mathbf{x}^{&prime;}$으로 구성된 행렬이므로 <b>대응점쌍들을 정규화(normalization)하지 않고 바로 해를 구하는 경우 $\mathbf{x}_{i} = (1000000,20000000,1)$과 같이 마지막 값에 비해서 처음 두 값의 크기가 매우 크게 되므로 수치적으로 불안정한 문제</b> 를 가진다. 따라서 $\mathbf{x}_{i}, \mathbf{x}_{i}^{&prime;}$를 Centroid가 0이고 Centroid로부터 평균거리가 $\sqrt{2}$가 되도록하는 Homography 변환 $\mathbf{H}, \mathbf{H}^{&prime;}$를 적용한다.
</p>


\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}_{i} \rightarrow \mathbf{Hx}_{i} \\
    &amp; \mathbf{x}_{i}^{\prime} \rightarrow \mathbf{H}^{\prime} \mathbf{x}_{i}^{\prime} \\
  \end{aligned}
\end{equation}
<p>
이렇게 변환된 대응쌍점들을 사용하여 수치적으로 안정적인 Fundamental Matrix $\mathbf{F}^{\prime}$계산할 수 있다. 앞서 설명한 내용을 따라 $\mathbf{F}^{&prime;}$를 계산한 다음 다시 원래의 대응점쌍 $\mathbf{x}&harr; \mathbf{x}^{&prime;}$으로 복원하기 위해
</p>

\begin{equation}
  \begin{aligned}
    0 &amp; = (\mathbf{H}^{\prime}\mathbf{x}^{\prime})^{\intercal}\mathbf{F}^{\prime}(\mathbf{Hx}) \\
    &amp; =  \mathbf{x}^{\intercal}(\mathbf{H}^{\prime\intercal} \mathbf{F}^{\prime}\mathbf{H})\mathbf{x}
  \end{aligned}
\end{equation}
<p>
처럼 $\mathbf{F}= \mathbf{H}^{&prime;\intercal} \mathbf{F}^{&prime;}\mathbf{H}$를 통해 원래 대응점쌍의 Fundamental Matrix $\mathbf{F}$를 계산할 수 있다.
</p>
</div>

<div id="outline-container-orgb761148" class="outline-4">
<h4 id="orgb761148"><span class="section-number-4">3.2.1</span> Degenrate configurations</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
두 개의 카메라 행렬 대응쌍 $(\mathbf{P}, \mathbf{P}^{\prime}, \{\mathbf{X}_{i}\})$, $(\mathbf{Q}, \mathbf{Q}^{&prime;}, \{\mathbf{Y}_{i}\})$가 다음의 조건을 만족하면 서로 <b>Conjugate Configuration</b> 이라고 한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{PX}_{i} = \mathbf{QY}_{i}, \mathbf{P}^{\prime}\mathbf{x}_{i} = \mathbf{Q}^{\prime}\mathbf{Y}^{\prime} \ \ \forall s \\
    &amp; (\mathbf{P}, \mathbf{P}^{}), (\mathbf{Q}, \mathbf{Q}^{\prime}) \ \ \text{share the same} \ \  \mathbf{F}
  \end{aligned}
\end{equation}
<p>
이 때, <b>Conjuate Configuration이 있는 카메라 행렬 대응쌍 $(\mathbf{P}, \mathbf{P}^{&prime;}, \{\mathbf{X}_{i}\})$을 Critical Triple이라고 부른다.</b>
</p>

<p>
임의의 카메라 대응쌍 $\mathbf{P}, \mathbf{P}^{&prime;}, \{\mathbf{X}_{i}\}$가 Critical Triple일 필요충분조건은 각각의 카메라 중심점 $\mathbf{C},\mathbf{C}^{&prime;}$과 3차원 공간 상의 점 ${\mathbf{X}_{i}}$가 어떤 Ruled Quadric Surface, 즉 직선을 포함하는 Quadric Surface 상에 포함되는 것이다. 
</p>
</div>
</div>

<div id="outline-container-orgdd8a9a9" class="outline-4">
<h4 id="orgdd8a9a9"><span class="section-number-4">3.2.2</span> Proof</h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
임의의 카메라 행렬 대응쌍 $(\mathbf{P}, \mathbf{P}^{&prime;}, \{\mathbf{X}_{i}\})$이 Critical Triple이라는 것을 보이기 위해서는 이와 대응하는 카메라 행렬 대응쌍 $(\mathbf{Q}, \mathbf{Q}^{&prime;}, \{\mathbf{Y}_{i}\})$이 같은 Fundamental Matrix $\mathbf{F}$를 가진다는 사실을 사용해야 한다. $\mathbb{P}^{3}$공간에서 이차곡면은 4x4 크기의 행렬로 정의된다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{S}_{p} := \mathbf{P}^{\prime}\mathbf{F}_{QQ^{\prime}}\mathbf{P}
  \end{aligned}
\end{equation}
<p>
여기서 이차곡면 $\mathbf{S}_{p} &isin; \mathbb{R}^{4&times; 4}$는 카메라 중심점 $\mathbf{C}, \mathbf{C}^{&prime;}$과 3차원 공간 상의 점 $\{\mathbf{X}_{i}\}$를 포함해야 한다.
</p>

<p>
<b>$\mathbf{S}_{p}$는 Ruled Quadric Surface이므로 직선을 포함하고 있음을 보이면 되므로 카메라 중심선을 연결한 직선인 baseline을 $\mathbf{S}_{p}$가 포함하고 있음</b> 을 보이면 된다. baseline 위에 있는 임의의 점 $\mathbf{X}$가 존재할 때
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{S}_{p} \mathbf{X} = \mathbf{P}^{\prime}\mathbf{F}_{QQ^{\prime}}\mathbf{P}\mathbf{X} = 0 \quad \because \mathbf{F}_{QQ^{\prime}}\mathbf{PX} = 0
  \end{aligned}
\end{equation}
<p>
을 만족하므로 $\mathbf{S}_{p}$는 Ruled Quadric Surface임을 알 수 있다.
</p>

<p>
반대로, 카메라 중심점 $\mathbf{C},\mathbf{C}^{&prime;}$와 3차원 공간 상의 점 $\{\mathbf{X}_{i}\}$가 $\mathbf{S}_{p}$에 속하면 다음 공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; (\mathbf{P}^{\prime}\mathbf{X}_{i})^{\intercal}\mathbf{F}_{QQ^{\prime}}(\mathbf{PX}_{i}) = 0 \\
  \end{aligned}
\end{equation}
<p>
여기서 $\mathbf{x}^{&prime;} = \mathbf{P}^{&prime;}\mathbf{X}_{i}, \mathbf{x}= \mathbf{PX}_{i}$이고 $\mathbf{F}_{QQ^{&prime;}}$이므로 $\mathbf{F}_{QQ^{&prime;}}$에 대한 대응점 쌍이 $\mathbf{x}, \mathbf{x}^{\prime}$존재한다는 의미이다. 따라서
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}^{\prime} = \mathbf{P}^{\prime}\mathbf{X}_{i} = \mathbf{Q}^{\prime}\mathbf{Y}_{i} \\
    &amp; \mathbf{x} = \mathbf{P}\mathbf{X}_{i} = \mathbf{Q}\mathbf{Y}_{i} \\
  \end{aligned}
\end{equation}
<p>
를 만족하므로 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{&prime;},\{\mathbf{X}_{i}\})$과 $(\mathbf{Q},\mathbf{Q}^{&prime;},\{\mathbf{Y}_{i}\})$는 같은 Fundamental Matrix $\mathbf{F}= \mathbf{F}_{PP^{&prime;}} = \mathbf{F}_{QQ^{&prime;}}$를 공유하는 Conjugate Triple이라는 것을 알 수 있다.
</p>
</div>
</div>
</div>

<div id="outline-container-orgc443854" class="outline-3">
<h3 id="orgc443854"><span class="section-number-3">3.3</span> The Gold Standard method</h3>
<div class="outline-text-3" id="text-3-3">
<p>
이미지 평면 상의 대응점 쌍 $\mathbf{x}&harr; \mathbf{x}^{&prime;}$는 일반적으로 노이즈를 포함하고 있으므로 이를 통해 Fundamental Matrix $\mathbf{F}$를 정확하게 계산할 수 없고 $\|\mathbf{Af}\|$의 크기를 최소화하는 근사해 $\mathbf{F}^{&prime;}$를 계산할 수 밖에 없다. 따라서 <b>$\mathbf{F}^{&prime;}$를 더 정확하게 계산하기 위해 2D Homography 문제와 마찬가지로 주어진 데이터 $\mathbf{x}, \mathbf{x}^{&prime;}$를 Ground Truth $\hat{\mathbf{x}}, \hat{\mathbf{x}}^{&prime;}$과 가까워지게 보정하는 방법을 The Gold Standard method</b> 라고 한다.
</p>

<ul class="org-ul">
<li>8개 이상의 대응점 쌍 $\mathbf{x}&harr; \mathbf{x}^{&prime;}$이 주어졌을 때 우선 앞서 설명한 것과 같이 총 두 번 SVD를 사용하여 rank가 2인 Fundamental Matrix $\mathbf{F}_{0}$를 계산한다. 이 때, $\mathbf{F}_{0}$를 Linear Solution이라고 부른다.</li>
<li>다음으로 Epipole $\mathbf{e}, \mathbf{e}^{&prime;}$에 대하여 다음 공식이 성립한다.</li>
</ul>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{e}^{\prime}\mathbf{F}_{0} = 0, \quad  \mathbf{F}_{0}\mathbf{e} = 0 \\
  \end{aligned}
\end{equation}
<ul class="org-ul">
<li>위 공식으로부터 $\mathbf{e}, \mathbf{e}^{&prime;}$를 각각 계산한다.</li>
<li>Epipole을 계산하면 Caninocal Form의 카메라 행렬 $\mathbf{P}, \mathbf{P}^{&prime;}$를 계산할 수 있다.</li>
</ul>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = [\mathbf{I}|0], \quad \mathbf{P}^{\prime} = [\mathbf{M}|\mathbf{m}] \\
    &amp; \text{where, } \ \mathbf{M} = \mathbf{e}^{\prime\wedge}\mathbf{F}, \ \mathbf{m} = \mathbf{e}^{\prime}
  \end{aligned}
\end{equation}
<ul class="org-ul">
<li>이를 통해 $\mathbf{x}, \mathbf{x}^{&prime;}$의 Back-projection된 직선들을 각각 구할 수 있다.</li>
<li>두 Back-projection 직선과 가장 근접한 3차원 공간 상의 점 $\mathbf{X}_{i}$를 계산할 수 있다.</li>
<li>이미지 평면에 3차원 공간 상의 점 $\mathbf{X}_{i}$를 재투영(reprojection) 한다.</li>
</ul>

\begin{equation}
  \begin{aligned}
    &amp; \hat{\mathbf{x}} = \mathbf{PX}_{i} \\
    &amp; \hat{\mathbf{x}}^{\prime} = \mathbf{P}^{\prime}\mathbf{X}_{i} \\
  \end{aligned}
\end{equation}
<p>
다음과 같이 재투영 오차(reprojection error)를 Gauss-Newton, Levenerg-Marquardt 등과 같은 비선형 최적화 방법을 사용하여 최소화한다.
</p>

\begin{equation}
  \begin{aligned}
    \sum_{i} d(\mathbf{x} - \hat{\mathbf{x}})^{2} + d(\mathbf{x}^{\prime}, \hat{\mathbf{x}}^{\prime})^{2}
  \end{aligned}
\end{equation}
<p>
이 때 최적화되는 파라미터는 $\mathbf{X}_{i}$와 카메라 행렬 $\mathbf{P}^{&prime;} = [\mathbf{M}|\mathbf{m}]$이다.
</p>
</div>
</div>
</div>

<div id="outline-container-org4b7d08d" class="outline-2">
<h2 id="org4b7d08d"><span class="section-number-2">4</span> Structure Computation</h2>
<div class="outline-text-2" id="text-4">

<figure>
<img src="/pictures/200607_mvg/54.png" alt="54.png" align="center" width="700px">

</figure>
</div>

<div id="outline-container-orgea9eec4" class="outline-3">
<h3 id="orgea9eec4"><span class="section-number-3">4.1</span> Problem statement</h3>
<div class="outline-text-3" id="text-4-1">
<p>
해당 섹션에서는 두 카메라 행렬 대응쌍 $\mathbf{P},\mathbf{P}^{&prime;}$와 이미지 평면의 대응점 쌍 $\mathbf{x}, \mathbf{x}^{&prime;}$가 주어진 경우 $\mathbb{P}^{3}$공간 상의 점 $\mathbf{X}$를 구하는 방법에 대해 설명한다. <b>이론적으로는 대응점 쌍 $\mathbf{x}, \mathbf{x}^{&prime;}$를 Back-projection하여 얻은 두 직선의 교차점을 통해 $\mathbf{X}$를 계산할 수 있으나 실제 데이터는 노이즈가 존재하기 때문에 두 Back-projection 직선이 교차하지 않는다.</b> 또한 노이즈로 인해 두 이미지 평면 상에서 Epipolar Line $\mathbf{l}, \mathbf{l}^{\prime}$또한 $\mathbf{x}, \mathbf{x}^{&prime;}$와 만나지 않는다.
</p>


<figure>
<img src="/pictures/200607_mvg/55.png" alt="55.png" align="center" width="800px">

</figure>

<p>
이를 해결하기 위해서 두 Back-projection 직선들에 동시에 수직인 최단거리 직선을 구한 다음 최단거리 직선의 중점(mid-point)를 계산하여 $\mathbf{X}$를 계산하는 방법이 존재한다. 해당 방법은 체크보드를 이용한 캘리브레이션 방법과 같이 $\mathbf{P}, \mathbf{P}^{&prime;}$가 고정된 경우에는 사용하면 좋은 방법이지만, 대부분의 경우 $\mathbf{P}, \mathbf{P}^{&prime;}$는 사영모호성(projective ambiguity)으로 인해 유일하게 결정되지 않는다.
</p>

<p>
<b>현실 세계에서는 카메라 행렬을 Affinity 또는 Projectivity까지 알고 있는 경우(up to affinity, projectivity)가 대부분이다. 정확한 $\mathbf{X}$를 구하기 위해서는 triangulation이 사영모호성에 대해서도 불변이어야 한다.</b> Triangulation $&tau;$은 주어진 대응점 쌍과 카메라 행렬 대응쌍으로부터 $\mathbf{X}&isin; \mathbb{P}^{3}$를 계산하는 방법을 말한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{X} = \tau(\mathbf{x},\mathbf{x}^{\prime},\mathbf{P},\mathbf{P}^{\prime})
  \end{aligned}
\end{equation}
<p>
$&tau;$가 사영모호성에 불변이기 위해서는 임의의 Homography $\mathbf{H}&isin;\text{PGL}_{4}$에 대하여
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{X}_{H} &amp; = \tau(\mathbf{x},\mathbf{x}^{\prime},\mathbf{PH}^{-1},\mathbf{P}^{\prime}\mathbf{H}^{-1}) \\
    &amp; = \mathbf{H}\cdot\tau(\mathbf{x},\mathbf{x}^{\prime},\mathbf{P},\mathbf{P}^{\prime}) \\
    &amp; = \mathbf{HX}
  \end{aligned}
\end{equation}
<p>
공식이 성립해야 한다. 위와 같이 불변성이 성립하는 경우 
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{PH}^{-1} \mathbf{X}_{H} &amp; = \mathbf{PH}^{-1}\mathbf{HX} \\
    &amp; = \mathbf{PX} \\
    &amp; = \mathbf{x}
  \end{aligned}
\end{equation}
<p>
이 된다. 마찬가지로 $\mathbf{P}^{&prime;}\mathbf{H}^{-1}\mathbf{X}_{H} = \mathbf{x}^{&prime;}$이 된다. 예를 들어, Fundemantal Matrix $\mathbf{F}$와 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{\prime})$, 대응점 쌍 $(\mathbf{x}, \mathbf{x}^{&prime;})$이 주어졌을 때 $(\mathbf{P},\mathbf{P}^{&prime;})$를 Homography 변환한 카메라 행렬 대응쌍 $(\mathbf{PH}^{-1},\mathbf{P}^{\prime}\mathbf{H}^{-1})$또한 동일한 $\mathbf{F}$를 공유한다. 이를 통해
</p>


\begin{equation}
  \begin{aligned}
    &amp; \{\mathbf{X}\}: \ \text{ 3D Points from} \ (\mathbf{x},\mathbf{x}^{\prime}) \ \text{and } (\mathbf{P},\mathbf{P}^{\prime}). \\
    &amp; \{\mathbf{X}_{H}\}: \ \text{ 3D Points from} \ (\mathbf{x},\mathbf{x}^{\prime}) \ \text{and } (\mathbf{P}\mathbf{H}^{-1},\mathbf{P}^{\prime}\mathbf{H}^{-1}). \\
  \end{aligned}
\end{equation}
<p>
과 같이 두 PointCloud $\{\mathbf{X}\},\{\mathbf{X}_{H}\}$를 구할 수 있고 <b>PointCloud가 Homography에 불변이기 위해서는 두 PointCloud 사이에</b>
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}\{\mathbf{X}\} = \{\mathbf{X}_{H}\}
  \end{aligned}
\end{equation}
<p>
<b>인 변환 성질을 만족해야 한다.</b> 앞서 설명한 중점(mid-point)을 사용한 방법은 두 Back-projection 직선들에 서로 수직인 최단거리 직선이 Homography 변환을 수행하면 더 이상 직교하지 않게 되고 중점 또한 더 이상 중심이 위치하지 않게 된다. 따라서 <b>중점을 사용한 방법은 Homography에 불변하지 않다.</b>
</p>
</div>
</div>

<div id="outline-container-org57cc37e" class="outline-3">
<h3 id="org57cc37e"><span class="section-number-3">4.2</span> Linear triangulation methods</h3>
<div class="outline-text-3" id="text-4-2">
<p>
해당 섹션에서는 $\mathbf{X}&isin; \mathbb{P}^{3}$를 구하기 위해 선형방정식을 사용하는 방법을 설명한다. $\mathbf{x}=\mathbf{PX}, \mathbf{x}^{&prime;}=\mathbf{P}^{&prime;}\mathbf{X}$로부터
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}^{\wedge}(\mathbf{PX}) = 0\\
    &amp; \mathbf{x}^{\prime\wedge}(\mathbf{P}^{\prime}\mathbf{X})=0
  \end{aligned}
\end{equation}
<p>
공식이 성립한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x} = \begin{bmatrix} x&amp;y&amp;1 \end{bmatrix}^{\intercal} \\
    &amp; \mathbf{P} = \begin{bmatrix} \mathbf{p}_{1,row}^{\intercal} &amp; \mathbf{p}_{2,row}^{\intercal} &amp; \mathbf{p}_{3,row}^{\intercal} \end{bmatrix}^{\intercal} \\
    &amp; \mathbf{X} = \begin{bmatrix} X&amp;Y&amp;Z&amp;W \end{bmatrix}^{\intercal}
  \end{aligned}
\end{equation}
<p>
$\mathbf{p}_{i,row}^{\intercal}$를 $\mathbf{P}$의 i번째 행(row)라고 했을 때 $\mathbf{x}^{&and;}(\mathbf{PX})$를 전개한 후 정리하면 
</p>

\begin{equation}
  \begin{aligned}
    &amp; x(\mathbf{p}_{3,row}^{\intercal}\mathbf{X}) - (\mathbf{p}_{1,row}^{\intercal}\mathbf{X}) = 0 \\
    &amp; y(\mathbf{p}_{3,row}^{\intercal}\mathbf{X}) - (\mathbf{p}_{2,row}^{\intercal}\mathbf{X}) = 0 \\
    &amp; x(\mathbf{p}_{2,row}^{\intercal}\mathbf{X}) - y(\mathbf{p}_{1,row}^{\intercal}\mathbf{X}) = 0 \\
  \end{aligned}
\end{equation}
<p>
과 같고 이를 $\mathbf{x}^{&prime;&and;}(\mathbf{P}^{&prime;}\mathbf{X})$도 같이 구한 후 $\mathbf{X}$에 대한 선형시스템으로 다시 작성하면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \underbrace{\begin{bmatrix}
        x \mathbf{p}_{3,row}^{\intercal}-\mathbf{p}_{1,row}^{\intercal} \\
        y \mathbf{p}_{3,row}^{\intercal}-\mathbf{p}_{2,row}^{\intercal} \\
        x^{\prime} \mathbf{p}^{\prime3\intercal}-\mathbf{p}^{\prime1\intercal} \\
        y^{\prime} \mathbf{p}^{\prime3\intercal}-\mathbf{p}^{\prime2\intercal} \\
    \end{bmatrix}}_{\mathbf{A}}\mathbf{X} = 0 \\
  \end{aligned}
\end{equation}
<p>
같이 $\mathbf{AX} = 0$형태로 정리할 수 있다. 데이터에 노이즈가 없는 경우 $\mathbf{A}&isin; \mathbb{R}^{4&times; 4}$의 rank가 3이 되어 Null Space 벡터를 통해 유일한 $\mathbf{X}$를 계산할 수 있지만 노이즈가 존재하는 경우 $\mathbf{A}$의 rank는 4가 되어 무수히 많은 해가 존재한다. 따라서 $\mathbf{A}$를 특이값 분해(SVD)하여 $\|\mathbf{X}\|=1$일 때 $\|\mathbf{AX}\|$의 크기를 최소화하는 근사해 $\hat{\mathbf{X}}$를 계산해야 한다.
</p>

<p>
선형 방법에 Homography를 적용해보면
</p>

\begin{equation}
  \begin{aligned}
    y(\mathbf{p}^{3}) - \mathbf{p}^{2} &amp; = y(\mathbf{p}\mathbf{H}^{-1})^{3} - (\mathbf{p}\mathbf{H}^{-1})^{2} \\
    &amp; = y(\mathbf{p}^{3})\mathbf{H}^{-1} - \mathbf{p}^{2}\mathbf{H}^{-1} \\
    &amp; = (y(\mathbf{p}^{3})-\mathbf{p}^{2})\mathbf{H}^{-1}
  \end{aligned}
\end{equation}
<p>
과 같이 $\mathbf{A}&rArr; \mathbf{AH}^{-1}$로 변환되어 $\mathbf{X}&rArr; \mathbf{X}_{H}$로 변환이 된다. 이를 통해
</p>

\begin{equation}
  \begin{aligned}
 \|\mathbf{AX}\| = \| \mathbf{AH}^{-1}\mathbf{X}_{H}\|
  \end{aligned}
\end{equation}
<p>
이 성립하지만 <b>Homography 변환을 할 때 $\|\mathbf{X}_{H} \| &ne; 1$이 되어 $\|\mathbf{X}\|=1$의 성질을 보존하지 않는다. 따라서 선형방정식을 통한 방법은 Homography에 대해 불변이 아니므로 최적의 솔루션이 아니다.</b>
</p>
</div>

<div id="outline-container-org2cb034c" class="outline-4">
<h4 id="org2cb034c"><span class="section-number-4">4.2.1</span> Inhomogeneous method</h4>
<div class="outline-text-4" id="text-4-2-1">
<p>
카메라 행렬 대응쌍 $\mathbf{P},\mathbf{P}^{&prime;}$이 Affine 변환까지(up to affinity) 결정되는 경우 $\mathbf{X}=(X,\ Y,\ Z,\ 1)^{\intercal}$로 놓고 $\|\mathbf{AX}\|$를 최소화하는 근사해 $\hat{\mathbf{X}}$를 구하는 방법을 Inhomogeneous method라고 한다. $\mathbf{X}$는 Affine Point이므로 $\|\mathbf{X}\|=1$제약조건이 사라지게 된다. 따라서, <b>Inhomogeneous method는 임의의 Affine 변환 $\mathbf{H}_{A}$에 대해 불변인 특성을 지닌다.</b>
</p>
</div>
</div>
</div>

<div id="outline-container-org0f0b8fd" class="outline-3">
<h3 id="org0f0b8fd"><span class="section-number-3">4.3</span> An optimial solution</h3>
<div class="outline-text-3" id="text-4-3">
<p>
해당 섹션에서는 최적의 $\mathbf{X}&isin;\mathbb{P}^{3}$을 구하기 위한 Optimal Triangulation 방법에 대해 설명한다. 우선 비선형 최소제곱법(non-linear least square)을 통해 $\mathbf{X}$를 구하는 방법이 있다.
</p>

<ul class="org-ul">
<li>주어진 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{&prime;})$와 대응점 쌍 $(\mathbf{x},\mathbf{x}^{&prime;})$에 대해여 이전 섹션에서 설명한 선형방정식 $\mathbf{AX}=0$을 통해 구한 근사해 $\hat{\mathbf{X}}$를 초기값 $\mathbf{X}_{0}$로 설정한다.</li>
<li>$\mathbf{X}_{0}$를 각각 카메라에 프로젝션하면 $\hat{\mathbf{x}}, \hat{\mathbf{x}}^{&prime;}$가 생성되는데 이 때 $d(\mathbf{x},\hat{\mathbf{x}})^{2}+d(\mathbf{x}^{&prime;},\hat{\mathbf{x}}^{&prime;})^{2}$를 최소화한다. $d(\mathbf{x}_{1},\mathbf{x}_{2})$은 $\mathbf{x}_{1}$과 $\mathbf{x}_{2}$사이의 거리를 의미한다.</li>
<li>Gauss-Newton 또는 Levenberg-Marquardt와 같은 비선형 최소제곱법을 통해 반복적으로(iterative) 최적해 $\mathbf{X}^{&lowast;}$를 구한다.</li>
</ul>
</div>

<div id="outline-container-orge7ee13a" class="outline-4">
<h4 id="orge7ee13a"><span class="section-number-4">4.3.1</span> Reformulation of the minimization problem</h4>
<div class="outline-text-4" id="text-4-3-1">

<figure>
<img src="/pictures/200607_mvg/56.png" alt="56.png" align="center" width="800px">

</figure>

<p>
반복법을 사용하지 않고도(non-iterative) Optimal Triangulation을 수행할 수 있다. 해당 방법은 <b>$d(\mathbf{x},\hat{\mathbf{x}})$를 최적화하는 대신 $\mathbf{x}$와 파라미터화된 Epipolar Line $\mathbf{l}(t)$사이의 거리 $d(\mathbf{x},\mathbf{l}(t))$를 최적화한다. 즉, $\mathbf{x}$와 $\mathbf{l}(t)$사이의 거리를 최소화하는 파라미터 $t$를 구함으로써 최적해를 구한다.</b>
</p>

\begin{equation}
  \begin{aligned}
    \min_{t} d(\mathbf{x},\mathbf{l}(t))^{2} + d(\mathbf{x}^{\prime}, \mathbf{l}^{\prime}(t))^{2}
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-org53eca9d" class="outline-4">
<h4 id="org53eca9d"><span class="section-number-4">4.3.2</span> Details of the minimization</h4>
<div class="outline-text-4" id="text-4-3-2">
<p>
우선 $\mathbf{x}=(x,y,1)^{\intercal}$와 $\mathbf{x}^{&prime;}=(x^{&prime;},y^{&prime;},1)^{\intercal}$를 각각 원점 $(0,0,1)^{\intercal}$로 변환시킨다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x} = (x,y,1)^{\intercal} \rightarrow (0,0,1)^{\intercal} \\
    &amp; \mathbf{x}^{\prime} = (x^{\prime},y^{\prime},1)^{\intercal} \rightarrow (0,0,1)^{\intercal} \\
  \end{aligned}
\end{equation}
<p>
이를 변환해주는 행렬을
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{T}=\begin{bmatrix} 1&amp;&amp;-x \\&amp;1&amp;-y \\ &amp;&amp;1\end{bmatrix} &amp; \mathbf{T}^{\prime}=\begin{bmatrix} 1&amp;&amp;-x^{\prime} \\&amp;1&amp;-y^{\prime} \\ &amp;&amp;1\end{bmatrix}
  \end{aligned}
\end{equation}
<p>
로 설정한다. 다음으로 Epipole $\mathbf{e}=(e_{1},e_{2},e_{3})^{\intercal}, \ \mathbf{e}^{&prime;}=(e_{1}^{&prime;},e_{2}^{&prime;},e_{3}^{&prime;})^{\intercal}$을 각각 x축 상의 점인 $(1,0,f)^{\intercal}, (1,0,f^{&prime;})^{\intercal}$로 변환한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{e}=(e_{1},e_{2},e_{3})^{\intercal} \rightarrow (1,0,f)^{\intercal} \\
    &amp; \mathbf{e}^{\prime}=(e_{1}^{\prime},e_{2}^{\prime},e_{3}^{\prime})^{\intercal} \rightarrow (1,0,f^{\prime})^{\intercal} \\
  \end{aligned}
\end{equation}
<p>
이는 이미지 평면에서 각각 $(1/f,0)^{\intercal}, (1/f^{&prime;},0)^{\intercal}$을 의미한다. 우선 $e_{1}^{2}+e_{2}^{2}=e_{1}^{&prime;2}+e_{2}^{&prime;2}=1$이 되도록 Epipole을 정규화한 다음, 이를 x축 상의 점으로 회전하는 행렬을 $\mathbf{R}, \mathbf{R}^{\prime}$다음과 같이 정의한다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{R} = \begin{bmatrix} e_{1}&amp;e_{2}&amp; \\ -e_{2}&amp;e_{1}&amp; \\ &amp;&amp;1 \end{bmatrix} &amp; \mathbf{R}^{\prime} = \begin{bmatrix} e_{1}^{\prime}&amp;e_{2}^{\prime}&amp; \\ -e_{2}^{\prime}&amp;e_{1}^{\prime}&amp; \\ &amp;&amp;1 \end{bmatrix} &amp;
  \end{aligned}
\end{equation}
<p>
이를 통해 $\mathbf{Re}=(1,0,e_{3})^{\intercal}, \mathbf{R}^{&prime;}\mathbf{e}^{&prime;}=(1,0,e_{3}^{&prime;})^{\intercal}$로 변환한다. 이 때, $e_{3}=f, e_{3}^{&prime;}=f^{&prime;}$이다. 다음으로 Epipolar Line $\mathbf{l}$을 $\mathbf{l}(t)$로 파라미터화한다. Epipole $\mathbf{e}=(1,0,f)^{\intercal}$는 x축 선상에 위치한 점이므로 이를 지나는 Epipolar Line은 y축을 기준으로 $(0,t,1)^{\intercal}$과 같이 파라미터화할 수 있다. 따라서 $\mathbf{l}(t)$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}(t) &amp; = \begin{pmatrix} 0\\t\\1 \end{pmatrix}\times \begin{pmatrix} 1\\0\\f \end{pmatrix} \\
    &amp; = \begin{pmatrix} tf\\1\\ -t \end{pmatrix}
  \end{aligned}
\end{equation}
<p>
가 된다. 이전 단계에서 $\mathbf{x}$를 원점 $(0,0,1)^{\intercal}$로 옮겼으므로 $d(\mathbf{x},\mathbf{l}(t))$는
</p>

\begin{equation}
  \begin{aligned}
    d(\mathbf{x},\mathbf{l}(t))= \frac{t^{2}}{1^{2}+(tf)^{2}}
  \end{aligned}
\end{equation}
<p>
이 된다. 다음으로 $\mathbf{l}^{&prime;}(t)$를 계산해야 한다. Fundmamental Matrix $\mathbf{F}$를 사용하여 $\mathbf{l}^{&prime;}(t)$를 계산하면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{l}^{\prime}(t) = \mathbf{F}\begin{pmatrix} 0\\t\\1 \end{pmatrix}\\
    &amp; \because \mathbf{l}(t) \text{ is the epipolar line of } \begin{pmatrix} 0&amp;t&amp;1 \end{pmatrix}^{\intercal}.
  \end{aligned}
\end{equation}
<p>
과 같다. $\mathbf{F}$는 주어진 카메라 행렬 대응쌍에서 $\mathbf{F}_{0}$를 계산한 후 $\mathbf{F}_{0}$로부터 $\mathbf{T},\mathbf{R},\mathbf{T}^{&prime;},\mathbf{R}^{&prime;}$을 이용하여 계산할 수 있다. Epipole과 $\mathbf{F}$사이에는
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{F}\begin{pmatrix} 1\\0\\f \end{pmatrix} = 0 \\
    &amp; \begin{pmatrix} 1&amp;0&amp;f^{\prime} \end{pmatrix}\mathbf{F}=0
  \end{aligned}
\end{equation}
<p>
이 성립하므로 $\mathbf{F}_{1,col} = -f \mathbf{F}_{3,col}$그리고 $\mathbf{F}_{1,row} = -f^{&prime;}\mathbf{F}_{3,row}$가 되고 이를 정리하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} = \begin{bmatrix} f^{\prime}fd &amp; -f^{\prime}c &amp; -f^{\prime}d \\ -fb &amp; a &amp; b \\ -fd &amp; c &amp; d \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
가 된다. 이를 통해 $\mathbf{l}^{&prime;}(t)$를 다시 표현하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{l}^{\prime}(t) &amp; = \mathbf{F}\begin{pmatrix} 0\\t\\1 \end{pmatrix} = t \mathbf{F}_{2,col} + \mathbf{F}_{3,col} \\
    &amp; = \begin{pmatrix} -f^{\prime}(ct+d) \\ at+b \\ ct+d \end{pmatrix}^{\intercal}
  \end{aligned}
\end{equation}
<p>
이 된다. 다음으로 원점 $\mathbf{x}^{&prime;}$와 $\mathbf{l}^{\prime}(t)$사이의 거리 $d(\mathbf{x}^{&prime;}, \mathbf{l}^{&prime;}(t))$를 구하면
</p>

\begin{equation}
  \begin{aligned}
    d(\mathbf{x}^{\prime}, \mathbf{l}^{\prime}(t))^{2} = \frac{(ct+d)^{2}}{(at+b)^{2} + f^{\prime2}(ct+d)^{2}}
  \end{aligned}
\end{equation}
<p>
이 된다. 이를 통해 최적화하고자 하는 목적함수 $d(\mathbf{x},\mathbf{l}(t))^{2} + d(\mathbf{x}^{&prime;}, \mathbf{l}^{&prime;}(t))^{2}$는
</p>

\begin{equation}
  \begin{aligned}
    s(t) = \frac{t^{2}}{1+f^{2}t^{2}} + \frac{(ct+d)^{2}}{(at+b)^{2} + f^{\prime2}(ct+d)^{2}}
  \end{aligned}
\end{equation}
<p>
가 되고 이를 미분하여 0$(s^{&prime;}(t)=0)$이 되는 $t$를 찾으면 총 6개의 $t_{i}, \ i=1,&ctdot;,6$이 나오고 이 때 $s(t_{i})$값을   비교하여 최소가 되는 $t_{i}$를 찾는다. 이렇게 찾은 $t_{\min}$값을 사용한 $\mathbf{l}(t_{min}), \mathbf{l}^{&prime;}(t_{min})$가 최적의 Epipolar Line이 된다. 다음으로 
</p>

\begin{equation}
  \begin{aligned}
    &amp; \hat{\mathbf{x}} = \mathbf{l}(t_{\min}) \\
    &amp; \hat{\mathbf{x}}^{\prime} = \mathbf{l}^{\prime}(t_{\min}) \\
    &amp; \hat{\mathbf{x}} \leftarrow \mathbf{T}^{-1}\mathbf{R}^{-1}\hat{\mathbf{x}} \\
    &amp; \hat{\mathbf{x}}^{\prime} \leftarrow \mathbf{T}^{\prime-1}\mathbf{R}^{\prime-1}\hat{\mathbf{x}}^{\prime} \\
  \end{aligned}
\end{equation}
<p>
순서대로 변환하기 전 원래의 $\hat{\mathbf{x}}, \hat{\mathbf{x}}^{&prime;}$을 복원한 다음
</p>

\begin{equation}
  \begin{aligned}
    &amp; \hat{\mathbf{x}} \times \mathbf{P}\hat{\mathbf{X}} = 0 \\
    &amp; \hat{\mathbf{x}}^{\prime} \times \mathbf{P}\hat{\mathbf{X}}^{\prime} = 0 \\
  \end{aligned}
\end{equation}
<p>
식을 <b>$\mathbf{A}\hat{\mathbf{X}}=0$꼴로 정리하여 최종적으로 특이값 분해(SVD)를 통해 최적해 $\hat{\mathbf{X}}$를 구한다. 이와 같이 $\mathbf{X}$의 근사해를 구하는 방법을 Optimal Triangulation 방법이라고 한다.</b>
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org34812e0" class="outline-2">
<h2 id="org34812e0"><span class="section-number-2">5</span> Scene planes and homographies</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgc939da6" class="outline-3">
<h3 id="orgc939da6"><span class="section-number-3">5.1</span> Homographies given the plane and vice versa</h3>
<div class="outline-text-3" id="text-5-1">

<figure>
<img src="/pictures/200607_mvg/57.png" alt="57.png" align="center" width="600px">

</figure>

<p>
해당 섹션에서는 월드 상의 평면 $&pi;$이 주어졌을 때 이를 사용하여 하나의 이미지 평면에서 다른 이미지 평면으로 가는 Homography 변환에 대해 설명한다.
</p>
</div>

<div id="outline-container-org0469075" class="outline-4">
<h4 id="org0469075"><span class="section-number-4">5.1.1</span> Result 13.1</h4>
<div class="outline-text-4" id="text-5-1-1">
<p>
Canonical Form으로 변환한 카메라 행렬 대응쌍 $(\mathbf{P}, \mathbf{P}^{&prime;})$과 월드 상의 평면 $\pi$다음과 같이 주어졌을 때
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = [\mathbf{I} \ | \ 0] \\
    &amp; \mathbf{P}^{\prime} = [\mathbf{A} \ | \ \mathbf{a}] \\
    &amp; \pi = (\mathbf{v}^{\intercal}, 1)^{\intercal} \quad \mathbf{v} \in \mathbb{R}^{3}
  \end{aligned}
\end{equation}
<p>
이 때, Homography $\mathbf{H}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H} = \mathbf{A} - \mathbf{av}^{\intercal}
  \end{aligned}
\end{equation}
<p>
로 주어진다.
</p>
</div>
</div>

<div id="outline-container-org1644be4" class="outline-4">
<h4 id="org1644be4"><span class="section-number-4">5.1.2</span> Proof</h4>
<div class="outline-text-4" id="text-5-1-2">
<p>
두 카메라의 이미지 평면 $&pi;_{\mathbf{P}}, &pi;_{\mathbf{P}^{&prime;}}$가 주어졌을 때, 월드 평면 상의 점 $\mathbf{X}&isin; &pi;$를 $\pi_{\mathbf{P}}$평면으로 프로젝션한 점 $\mathbf{x}$는 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{PX} &amp; = [\mathbf{I}\ | \ 0]\begin{bmatrix} \tilde{\mathbf{X}} \\ 1 \end{bmatrix} \\
    &amp; = \tilde{\mathbf{X}} = \mathbf{x}
  \end{aligned}
\end{equation}
<p>
따라서 임의의 스칼라 $&rho;$에 대해  $~{\mathbf{X}} = &rho;^{-1}\mathbf{x}$가 성립한다. $\mathbf{X}$를 다시 쓰면 $\mathbf{X}=\begin{bmatrix}x &amp; &rho; \end{bmatrix}^{\intercal}$이 되고 $\mathbf{X}$는 $\pi$평면 위의 점이므로
</p>

\begin{equation}
  \begin{aligned}
    \begin{bmatrix} \mathbf{v}^{\intercal} &amp; 1 \end{bmatrix} \begin{bmatrix} \mathbf{x} \\ \rho \end{bmatrix} = 0
  \end{aligned}
\end{equation}
<p>
이 성립한다. 위 식을 풀면 $&rho; = -\mathbf{v}^{\intercal}\mathbf{x}$이 된다. $\mathbf{X}$를 $&pi;_{\mathbf{P}^{&prime;}}$에 프로젝션하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{\prime} &amp; = \mathbf{P}^{\prime}\mathbf{X} = [\mathbf{A} \ | \ \mathbf{a}]\begin{bmatrix} \mathbf{x} \\ -\mathbf{v}^{\intercal}\mathbf{x} \end{bmatrix} \\
    &amp; = \mathbf{Ax} - \mathbf{av}^{\intercal}\mathbf{x} \\
    &amp; = (\mathbf{A}-\mathbf{av}^{\intercal})\mathbf{x}
  \end{aligned}
\end{equation}
<p>
이 되므로 따라서 $\mathbf{H}= \mathbf{A}-\mathbf{av}^{\intercal}$이 된다.
</p>
</div>
</div>

<div id="outline-container-org92602c6" class="outline-4">
<h4 id="org92602c6"><span class="section-number-4">5.1.3</span> A calibrated stereo rig</h4>
<div class="outline-text-4" id="text-5-1-3">
<p>
캘리브레이션 된 스테레오 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{&prime;})$가 다음과 같이 주어지고
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = \mathbf{K}[\mathbf{I} \ | \ 0] \\
    &amp; \mathbf{P}^{\prime} = \mathbf{K}^{\prime}[\mathbf{R} \ | \ \mathbf{t}]
  \end{aligned}
\end{equation}
<p>
월드 상의 평면 $&pi;=(\mathbf{n}^{\intercal},d)^{\intercal}$이 주어진 경우, $\pi$평면 상의 점 $\mathbf{X}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{n}^{\intercal}\tilde{\mathbf{X}}+d=0
  \end{aligned}
\end{equation}
<p>
이 성립한다. 이를 다시 정리하면 $-\frac{\mathbf{n}^{\intercal}~{\mathbf{X}}}{d}=1$이 된다. $\mathbf{X}$를 이미지 평면 $\pi_{\mathbf{P}}$상에 프로젝션한 점 $\mathbf{x}$는 다음과 같이 나타낼 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x} &amp; = \mathbf{P}\mathbf{X} = \mathbf{K}[\mathbf{I}\ | \ 0]\begin{bmatrix} \tilde{\mathbf{X}}  \\ 1\end{bmatrix} \\
      &amp; = \mathbf{K}\tilde{\mathbf{X}}
  \end{aligned}
\end{equation}
<p>
따라서 $~{\mathbf{X}} = \mathbf{K}^{-1}\mathbf{x}$가 되고 다음으로 $\mathbf{X}$를 이미지 평면 $&pi;_{\mathbf{P}^{&prime;}}$에 프로젝션한 점 $\mathbf{x}^{&prime;}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}^{\prime} &amp; = \mathbf{P}^{\prime}\mathbf{X} = \mathbf{K}^{\prime}[\mathbf{R}\ | \ \mathbf{t}]\begin{bmatrix} \tilde{\mathbf{X}}  \\ 1\end{bmatrix} \\
      &amp; = \mathbf{K}^{\prime}\mathbf{R}\tilde{\mathbf{X}} + \mathbf{K}^{\prime}\mathbf{t}(-\frac{\mathbf{n^{\intercal}\tilde{\mathbf{X}}}}{d}) \\
      &amp; = \mathbf{K}^{\prime}(\mathbf{R}-\frac{\mathbf{tn}^{\intercal}}{d})\tilde{\mathbf{X}} \\
      &amp; = \mathbf{K}^{\prime}(\mathbf{R}-\frac{\mathbf{tn}^{\intercal}}{d})\mathbf{K}^{-1}\mathbf{x} \\
  \end{aligned}
\end{equation}
<p>
가 되어 결론적으로 캘리브레이션된 스테레오 카메라에서 Homography $\mathbf{H}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H} = \mathbf{K}^{\prime}(\mathbf{R}-\frac{\mathbf{tn}^{\intercal}}{d})\mathbf{K}^{-1} \\
  \end{aligned}
\end{equation}
<p>
가 된다.
</p>
</div>
</div>

<div id="outline-container-org452bdae" class="outline-4">
<h4 id="org452bdae"><span class="section-number-4">5.1.4</span> Homographies compatible with epipolar geometry</h4>
<div class="outline-text-4" id="text-5-1-4">

<figure>
<img src="/pictures/200607_mvg/58.png" alt="58.png" align="center" width="600px">

</figure>

<p>
월드 상의 평면 $\pi$위에 존재하는 4개의 대응점 쌍 $(\mathbf{x}_{i}, \mathbf{x}_{i}^{&prime;}), \ i=1,&ctdot;,4$가 주어졌다고 가정해보자. 4개의 대응점 쌍으로부터 8개의 제약조건을 얻을 수 있으며 이를 통해 Homograpy $\mathbf{H}$를 유일하게 결정할 수 있다.
</p>

<p>
다음으로 월드 상에 서로 일직선으로 있지 않은(no three are collinear) 임의의 4개의 대응점 쌍 $(\mathbf{x}_{i},\mathbf{x}_{i}^{&prime;}), i=1,&ctdot;,4$가 주어졌다고 가정해보자. <b>이 때, 한 이미지 평면 $&pi;_{\mathbf{P}}$에서 다른 이미지 평면 $&pi;_{\mathbf{P}^{&prime;}}$으로 점들을 변환하는 Homography $\mathbf{H}$가 존재하게 되는데 이러한 $\mathbf{H}$가 두 카메라 사이의 Fundamental Matrix $\mathbf{F}$와 서로 호환(compatible)이 되기 위해서는 $\mathbf{H}$가 월드 평면 상의 평면 $&pi;$에 대한 Homography 변환이어야 한다. 다시 말하면, $\mathbf{H}$가 Epipolar Geometry를 따르기 위해서는 $\mathbf{H}$가 $&pi;$에 대한 Homography이어야 한다.</b> Epipolar Geometry에 의해 $\mathbf{x}$가 $\mathbf{Hx}$와 대응이 되기 위한 조건은
</p>

\begin{equation}
  \begin{aligned}
    (\mathbf{Hx})^{\intercal}\mathbf{F}\mathbf{x} = 0
  \end{aligned}
\end{equation}
<p>
이다. 즉, $\mathbf{x}^{\intercal}\mathbf{H}^{\intercal}\mathbf{Fx}=0$을 만족해야 하므로 $\mathbf{H}^{\intercal}\mathbf{F}$가 반대칭행렬(skew-symmetric)이어야 한다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}^{\intercal}\mathbf{F} + \mathbf{F}^{\intercal}\mathbf{H} = 0
  \end{aligned}
\end{equation}
<p>
<b>위 조건은 $\mathbf{H}$가 Epipolar Geometry를 따르기 위한 필요충분조건이다.</b>
</p>
</div>
</div>

<div id="outline-container-orge85b662" class="outline-4">
<h4 id="orge85b662"><span class="section-number-4">5.1.5</span> Result 13.3</h4>
<div class="outline-text-4" id="text-5-1-5">
<p>
일반적으로 $\mathbf{F}=\mathbf{e}^{&prime;&and;}\mathbf{A}$와 같이 주어졌을 때 $\mathbf{H}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H} = \mathbf{A} - \mathbf{e}^{\prime}\mathbf{v}^{\intercal}
  \end{aligned}
\end{equation}
<p>
이 된다. 이 때, $\mathbf{H}$는 $\mathbf{v}&isin; \mathbb{R}^{3}$로부터 3자유도를 가진다.
</p>
</div>
</div>

<div id="outline-container-org895019f" class="outline-4">
<h4 id="org895019f"><span class="section-number-4">5.1.6</span> Proof</h4>
<div class="outline-text-4" id="text-5-1-6">
<p>
$\mathbf{F}=\mathbf{e}^{&prime;&and;}\mathbf{A}$와 같이 주어진 경우 Projective Reconstruction을 수행하면 두 카메라 행렬 대응쌍을
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = [\mathbf{I} \ | \ 0] \\
    &amp; \mathbf{P}^{\prime} = [\mathbf{A}  \ | \ \mathbf{e}^{\prime}]
  \end{aligned}
\end{equation}
<p>
과 같이 구할 수 있다. 월드 상의 평면 $&pi;=(\mathbf{v}^{\intercal}, 1)^{\intercal}$이 주어졌을 때 앞의 정리에 의해
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H} = \mathbf{A} - \mathbf{e}^{\prime}\mathbf{v}
  \end{aligned}
\end{equation}
<p>
와 같이 구할 수 있다. 이를 $\mathbf{F}^{\intercal}\mathbf{H}$에 대입하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F}^{\intercal}\mathbf{H} &amp; = -\mathbf{A}^{\intercal}\mathbf{e}^{\prime\wedge}(\mathbf{A}-\mathbf{e}^{\prime\intercal}\mathbf{v}) \\
    &amp; = -\mathbf{A}^{\intercal}\mathbf{e}^{\prime\wedge}\mathbf{A} \quad \because \mathbf{e}^{\prime\wedge}\mathbf{e}^{\prime} = 0
  \end{aligned}
\end{equation}
<p>
와 같이 반대칭행렬(skew-symmetric)이 된다.
</p>
</div>
</div>

<div id="outline-container-org611486b" class="outline-4">
<h4 id="org611486b"><span class="section-number-4">5.1.7</span> Corollary</h4>
<div class="outline-text-4" id="text-5-1-7">
<p>
두 카메라 사이의 임의의 Homography $\mathbf{H}$가 Epipolar Geometry를 따르기 위해서는 $\mathbf{H}$가 월드 상의 평면 $&pi;$에 대한 Homography이어야 한다. $\mathbf{H}$가 월드 상의 평면 $&pi;$에 대한 Homography이기 위한 필요충분조건은 다음과 같다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F} = \mathbf{e}^{\prime\wedge}\mathbf{H}
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-org7b05a26" class="outline-4">
<h4 id="org7b05a26"><span class="section-number-4">5.1.8</span> Proof</h4>
<div class="outline-text-4" id="text-5-1-8">
<p>
($\Rightarrow$) $\mathbf{H}$가 월드 상의 평면 $&pi;=(\mathbf{v}^{\intercal},1)^{\intercal}$에 대한 Homography이면서 $\mathbf{F}=\mathbf{e}^{&prime;&and;}\mathbf{A}$일 때 앞서 정리에 의해
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H} = \mathbf{H}_{\begin{pmatrix} \mathbf{v}\\1 \end{pmatrix}} = \mathbf{A} - \mathbf{e}^{\prime\intercal}\mathbf{v} 
  \end{aligned}
\end{equation}
<p>
가 성립한다. 따라서
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{e}^{\prime\wedge}\mathbf{H} &amp; = \mathbf{e}^{\prime\wedge}(\mathbf{A}-\mathbf{e}^{\prime\intercal}\mathbf{v}) \\
    &amp; = \mathbf{e}^{\prime\wedge}\mathbf{A} = \mathbf{F} \quad \because \mathbf{e}^{\prime\wedge}\mathbf{e}^{\prime} = 0
  \end{aligned}
\end{equation}
<p>
가 된다.
</p>

<p>
($\Leftarrow$) $\mathbf{F}=\mathbf{e}^{&prime;&and;}\mathbf{H}$인 경우 $\mathbf{H}$는 월드 상의 임의의 평면 $&pi;$에 의한 Homography이다. 예를 들어, $\mathbf{H}$가 무한대 평면 $&pi;_{&infin;}=(\mathbf{0}^{\intercal},1)^{\intercal}$에 의한 Homography라고 하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H} &amp; = \mathbf{H}_{\begin{pmatrix} \mathbf{0}\\1 \end{pmatrix}} = \mathbf{H} - \mathbf{e}^{\prime}\cdot 0  = \mathbf{H}
  \end{aligned}
\end{equation}
<p>
가 된다.
</p>
</div>
</div>
</div>

<div id="outline-container-orge1c4778" class="outline-3">
<h3 id="orge1c4778"><span class="section-number-3">5.2</span> Plane induced homographies given $\mathbf{F}$and image correspondences</h3>
<div class="outline-text-3" id="text-5-2">
</div>
<div id="outline-container-orgfc2678a" class="outline-4">
<h4 id="orgfc2678a"><span class="section-number-4">5.2.1</span> Three points</h4>
<div class="outline-text-4" id="text-5-2-1">

<figure>
<img src="/pictures/200607_mvg/59.png" alt="59.png" align="center" width="600px">

</figure>

<p>
<b>두 개의 이미지 평면 $&pi;_{\mathbf{P}}, &pi;_{\mathbf{P}^{&prime;}}$에 세 개의 대응점 쌍 $(\mathbf{x}_{i},\mathbf{x}_{i}^{&prime;}), \ i=1,2,3$이 주어졌을 때 이들을 Back-projection한 월드 상의 점 $\mathbf{X}_{i}, \ i=1,2,3$을 통해 월드 상의 평면 $&pi;$를 유일하게 결정할 수 있고 이를 통한 Homography $\mathbf{H}$를 계산할 수 있다.</b> 해당 섹션에서는 이러한 Homography $\mathbf{H}$를 구하는 방법에 대해 설명한다.
</p>

<p>
$\mathbf{H}$를 구하는 방법에는 크게 두 가지 방법이 존재한다. <b>첫 번째 방법은 월드 상의 평면 $&pi;$를 직접 구하는 방법이 있다.</b> 세 개의 대응점 쌍 $(\mathbf{x}_{i},\mathbf{x}_{i}^{&prime;}), \ i=1,2,3$과 Fundamental Matrix $\mathbf{F}=\mathbf{e}^{&prime;&and;}\mathbf{A}$가 주어진 경우 이를 통해 카메라 행렬을 구할 수 있다(projective reconstrcution). 주어진 대응점 쌍 $(\mathbf{x}_{i},\mathbf{x}_{i}^{&prime;}), \ i=1,2,3$과 $\mathbf{F}$를 통해
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = [\mathbf{I}\ | \ 0] \\
    &amp; \mathbf{P}^{\prime} = [\mathbf{A} \ | \ \mathbf{e}^{\prime}]
  \end{aligned}
\end{equation}
<p>
을 사영모호성을 포함하여(up to projectivity) 결정할 수 있다. 그리고 $\mathbf{P},\mathbf{P}^{&prime;}$를 사용하여 Back-projection한 월드 상의 점 $\mathbf{X}_{i},\ i=1,2,3$또한 계산할 수 있다. 이 때, $\mathbf{X}_{i},\ i=1,2,3$은 동일한 직선 상에 존재하면 안된다(not colinear). 다음으로 월드 상의 세 개의 점 $\mathbf{X}_{i},\ i=1,2,3$을 포함하는 월드 상의 평면 $&pi;$를 유일하게 결정할 수 있고 $&pi;=(\mathbf{v}^{\intercal},d)^{\intercal}$일 때
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H} = \mathbf{A} - \mathbf{e}^{\prime}\mathbf{v}^{\intercal}
  \end{aligned}
\end{equation}
<p>
과 같이 $&pi;$를 기반으로 $\pi_{\mathbf{P}} \leftrightarrow \pi_{\mathbf{P}^{\prime}}$사이의 점들을 변환하는 Homography $\mathbf{H}$를 계산할 수 있다. 
</p>

<p>
<b>두 번째 방법은 $\mathbf{Hx}_{i} = \mathbf{x}^{&prime;}_{i},\ i=1,2,3$을 대수적으로 푸는 방법이다.</b> 이 때 $\mathbf{x}^{&prime;}_{i} &times; (\mathbf{Hx}_{i}) = 0$의 공식을 선형방정식의 $\mathbf{Ah}=0$형태로 변형함으로써 Homography $\mathbf{H}$를 구할 수 있다. 하지만 Homography $\mathbf{H}$를 구하려면 총 네 개의 대응점 쌍이 필요한데 주어진 대응점 쌍은 세 개이므로 추가적으로 한 개의 대응점 쌍이 필요하다. 미리 알고 있는 Fundamental Matrix $\mathbf{F}$를 사용하여 두 이미지 평면의 Epipole $\mathbf{e},\mathbf{e}^{&prime;}$을 구하고 이를 Back-projection함으로써 한 개의 대응점쌍을 추가하여 Homography $\mathbf{H}$를 계산할 수 있다. 단, 이 때 대응점 쌍 $(\mathbf{x}_{i},\mathbf{x}_{i}^{&prime;}), i=1,2,3$들이 Epipolar Line 위에 존재하면 안된다는 가정이 필요하다.
</p>
</div>
</div>

<div id="outline-container-org9a11671" class="outline-4">
<h4 id="org9a11671"><span class="section-number-4">5.2.2</span> Result 13.6</h4>
<div class="outline-text-4" id="text-5-2-2">
<p>
Fundamental Matrix $\mathbf{F}$와 세 개의 대응점 쌍 $(\mathbf{x}_{i},\mathbf{x}_{i}^{&prime;}), i=1,2,3$이 주어졌을 때 이들을 통해 계산한 월드 상의 평면 $&pi;$로 인한 Homography $\mathbf{H}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H} = \mathbf{A} - \mathbf{e}^{\prime}(\mathbf{M}^{-1}\mathbf{b})^{\intercal}
  \end{aligned}
\end{equation}
<p>
와 같이 계산할 수 있다. 이 때,
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{M} = \begin{bmatrix} \mathbf{x}_{1}\\\mathbf{x}_{2} \\ \mathbf{x}_{3} \end{bmatrix} \\
    &amp; \mathbf{b} = (\mathbf{x}^{\prime}_{i} \times (\mathbf{Ax}_{i}))^{\intercal}(\mathbf{x}_{i}^{\prime}\times \mathbf{e}^{\prime}) / \| \mathbf{x}_{i}^{\prime} \times \mathbf{e}^{\prime} \|
  \end{aligned}
\end{equation}
</div>
</div>

<div id="outline-container-orgb18bcb8" class="outline-4">
<h4 id="orgb18bcb8"><span class="section-number-4">5.2.3</span> Proof</h4>
<div class="outline-text-4" id="text-5-2-3">
<p>
Canonical 카메라 행렬 $\mathbf{P}=[\mathbf{I}\ | \ 0], \mathbf{P}^{&prime;}=[\mathbf{A}\ | \ \mathbf{e}^{&prime;}]$일 때 Fundmaental Matrix $\mathbf{F}=\mathbf{e}^{&prime; &and;}\mathbf{A}$와 같이 구할 수 있고 이 때 $\mathbf{e}^{&prime;&and;}\mathbf{F}= \mathbf{e}^{&prime;&and;}\mathbf{e}^{&prime;&and;}\mathbf{A}$가 되어서
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{e}^{\prime\wedge}\mathbf{F} = \mathbf{e}^{\prime\wedge}\mathbf{e}^{\prime\wedge}\mathbf{A} \sim \mathbf{A}
  \end{aligned}
\end{equation}
<p>
와 같이 $\mathbf{A}$와 비례 관계가 된다. 따라서 $\mathbf{A}= \mathbf{e}^{&prime;&and;}\mathbf{F}$가 성립한다.
</p>

<p>
월드 상의 평면 $&pi;=(\mathbf{v}^{\intercal},d)^{\intercal}$이 주어졌을 때 임의의 Homography $\mathbf{H}$는 $\mathbf{H}=\mathbf{A}-\mathbf{e}^{&prime;}\mathbf{v}$와 같이 나타낼 수 있고 이 때 $\mathbf{v}$를 구하기 위해
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}_{i}^{\prime} \times \mathbf{H}\mathbf{x}_{i} = 0
  \end{aligned}
\end{equation}
<p>
식을 세운 후 정리하면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}_{i}^{\prime} \times \mathbf{H}\mathbf{x}_{i} = 0 \\
    &amp; \mathbf{x}_{i}^{\prime} \times (\mathbf{A}\mathbf{x}_{i} - \mathbf{e}^{\prime}\mathbf{v}^{\intercal}\mathbf{x}_{i}) = 0 \\
    &amp; \mathbf{x}_{i}^{\prime} \times \mathbf{A}\mathbf{x}_{i} = (\mathbf{x}_{i} \times \mathbf{e}^{\prime})\mathbf{v}^{\intercal}\mathbf{x}_{i} \\
  \end{aligned}
\end{equation}
<p>
꼴이 된다. 양변에 $(\mathbf{x}_{i} &times; \mathbf{e}^{&prime;})^{\intercal}$을 곱한 후 정리하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{x}_{i}^{\intercal}\mathbf{v} = \mathbf{b}_{i}
  \end{aligned}
\end{equation}
<p>
형태가 나온다. 이를 세 개의 점에 대해 모두 적용하면
</p>

\begin{equation}
  \begin{aligned}
    \begin{bmatrix} \mathbf{x}_{1}\\\mathbf{x}_{2}\\\mathbf{x}_{3} \end{bmatrix}\mathbf{v} = \begin{bmatrix} \mathbf{b}_{1}\\\mathbf{b}_{2}\\\mathbf{b}_{3} \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
가 된다 이 때, $\begin{bmatrix}\mathbf{x}_{1}\\\mathbf{x}_{2}\\\mathbf{x}_{3} \end{bmatrix}$를 행렬 $\mathbf{M}$으로 치환하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{M}\mathbf{v} = \mathbf{b}
  \end{aligned}
\end{equation}
<p>
꼴이 되고 이를 정리하면 <b>결론적으로 $\mathbf{v}= \mathbf{M}^{-1}\mathbf{b}$가 된다. 이에 따라 Homography $\mathbf{H}$는 $\mathbf{H}= \mathbf{A}- \mathbf{e}^{&prime;}(\mathbf{M}^{-1}\mathbf{b})^{\intercal}$과 같이 나타낼 수 있다.</b>
</p>
</div>
</div>

<div id="outline-container-org8320f35" class="outline-4">
<h4 id="org8320f35"><span class="section-number-4">5.2.4</span> A point and line</h4>
<div class="outline-text-4" id="text-5-2-4">

<figure>
<img src="/pictures/200607_mvg/60.png" alt="60.png" align="center" width="800px">

</figure>

<p>
해당 섹션에서는 월드 상에 하나의 선과 하나의 점이 주어졌을 때 Homography $\mathbf{H}$를 구하는 방법에 대해 설명한다.
</p>
</div>
</div>

<div id="outline-container-org0f237c0" class="outline-4">
<h4 id="org0f237c0"><span class="section-number-4">5.2.5</span> Result 13.7</h4>
<div class="outline-text-4" id="text-5-2-5">
<p>
월드 상에 직선 $\mathbf{L}$에 대응하는 이미지 평면 상에 대응선 쌍 $\mathbf{l}&harr; \mathbf{l}^{&prime;}$이 주어졌을 때 월드 상의 직선 $\mathbf{L}$을 사용하여 $\mathbf{l}$을 $\mathbf{l}^{&prime;}$로 변환하는 Homography $\mathbf{H}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}(\mu) = \mathbf{l}^{\prime \wedge}\mathbf{F} + \mu \mathbf{e}^{\prime}\mathbf{l}^{\intercal}
  \end{aligned}
\end{equation}
<p>
과 같이 나타낼 수 있다. 이 때, $\mathbf{l}^{&prime; \intercal}\mathbf{e}^{&prime;} &ne; 0$이어야 하며 $&mu;$는 $&mu; &isin; \mathbb{P}^{1}$인 파라미터이다.
</p>
</div>
</div>

<div id="outline-container-org06efc07" class="outline-4">
<h4 id="org06efc07"><span class="section-number-4">5.2.6</span> Proof</h4>
<div class="outline-text-4" id="text-5-2-6">
<p>
카메라 행렬 대응쌍 $\mathbf{P}= [\mathbf{I}\ | \ 0], \mathbf{P}^{&prime;}=[\mathbf{A}\ | \ \mathbf{e}^{&prime;}]$이 주어졌을 때 이미지 평면 상의 직선 $\mathbf{l}, \mathbf{l}^{&prime;}$을 Back-projection한 평면 $&pi;_{\mathbf{l}} = \mathbf{P}^{\intercal}\mathbf{l}, &pi;_{\mathbf{l}^{&prime;}} = \mathbf{P}^{&prime;\intercal}\mathbf{l}^{&prime;}$과 같이 나타낼 수 있다. 두 개의 Back-projection 평면들은 $&pi;_{\mathbf{l}},\ &pi;_{\mathbf{l}^{&prime;}}$이 교차하는 선이 월드 상의 직선 $\mathbf{L}$이 되고 이 때 $\mathbf{L}$을 포함하는 평면 $&pi;$는
</p>

\begin{equation}
  \begin{aligned}
    \pi(\mu) &amp; = \mu \mathbf{P}^{\intercal}\mathbf{l} + \mathbf{P}^{\prime \intercal}\mathbf{l}^{\prime}\\
    &amp; = \mu \begin{pmatrix} \mathbf{l}\\0 \end{pmatrix} + \begin{pmatrix} \mathbf{A}^{\intercal}\mathbf{l}^{\prime} \\ \mathbf{e}^{\prime \intercal}\mathbf{l}^{\prime} \end{pmatrix} \\
    &amp; = \begin{pmatrix} \mu \mathbf{l} + \mathbf{A}^{\intercal}\mathbf{l}^{\prime} \\ \mathbf{e}^{\prime \intercal}\mathbf{l}^{\prime} \end{pmatrix}
  \end{aligned}
\end{equation}
<p>
과 같이 $&mu;$로 파라미터화하여 $\mathbf{L}$을 포함하는 무수한 평면을 나타낼 수 있다. Result 13.1로부터 평면 $&pi;(&mu;)$를 사용한 Homography $\mathbf{H}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}(\mu) = \mathbf{A} - \mathbf{e}^{\prime}\mathbf{v}(\mu)^{\intercal}
  \end{aligned}
\end{equation}
<p>
과 같이 나타낼 수 있고 이 때, $\mathbf{v}$는 위에서 설명한 $\pi(\mu)$공식에 따라 $\mathbf{v}(&mu;) = (&mu;\mathbf{l}+ \mathbf{A}^{\intercal}\mathbf{l}^{&prime;})/(\mathbf{e}^{&prime; \intercal}\mathbf{l}^{&prime;})$이 된다. 위 공식에 행렬 $\mathbf{A}$에 $\mathbf{A}= \mathbf{e}^{&prime;&and;}\mathbf{F}$를 대입하여 다시 정리하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}(\mu) = -(\mathbf{l}^{\prime\wedge}\mathbf{F} + \mu \mathbf{e}^{\prime}\mathbf{l}^{\intercal}) / (\mathbf{e}^{\prime \intercal}\mathbf{l}^{\prime}) \sim \mathbf{l}^{\prime\wedge}\mathbf{F} + \mu \mathbf{e}^{\prime}\mathbf{l}^{\intercal}
  \end{aligned}
\end{equation}
<p>
이 된다. 따라서 <b>$\mathbf{H}$는 따라서 $\mathbf{H}(&mu;) = \mathbf{l}^{&prime; &and;}\mathbf{F}+ &mu; \mathbf{e}^{&prime;}\mathbf{l}^{\intercal}$에 비례하므로 해당 식과 같이 쓸 수 있다.</b>
</p>
</div>
</div>

<div id="outline-container-org9cae6b9" class="outline-4">
<h4 id="org9cae6b9"><span class="section-number-4">5.2.7</span> The homography for a corresponding point and line</h4>
<div class="outline-text-4" id="text-5-2-7">
<p>
앞서 설명한 대응선 쌍 $\mathbf{l}&harr; \mathbf{l}^{&prime;}$을 이용한 Homography $\mathbf{H}(&mu;)$는 $\mu$값에 따라 Homography가 변하는 특징이 있다. 
</p>
</div>
</div>

<div id="outline-container-org4de0518" class="outline-4">
<h4 id="org4de0518"><span class="section-number-4">5.2.8</span> Result 13.8</h4>
<div class="outline-text-4" id="text-5-2-8">
<p>
하나의 대응선 쌍 $\mathbf{l}&harr; \mathbf{l}^{&prime;}$과 하나의 대응점 쌍 $\mathbf{x}&harr; \mathbf{x}^{&prime;}$이 주어지면 이를 통해 $\mu$값을 특정되어 다음과 같은 유일한 Homography $\mathbf{H}$가 도출된다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H} = \mathbf{l}^{\prime\wedge}\mathbf{F} + \frac{(\mathbf{x}^{\prime}\times \mathbf{e}^{\prime})^{\intercal}(\mathbf{x}^{\prime}\times((\mathbf{Fx})\times \mathbf{l}^{\prime}))}{\| \mathbf{x}^{\prime}\times \mathbf{e}^{\prime} \|^{2}(\mathbf{l}^{\intercal}\mathbf{x})}\mathbf{e}^{\prime}\mathbf{l}^{\intercal}
  \end{aligned}
\end{equation}
<p>
대응선 쌍 $\mathbf{l}&harr; \mathbf{l}^{&prime;}$를 사용하면 월드 상의 평면 $&pi;(&mu;)$를 통해 $\mathbf{H}(&mu;) = \mathbf{l}^{&prime; &and;}\mathbf{F}+ &mu; \mathbf{e}^{&prime;}\mathbf{l}^{\intercal}$와 같이 Homography를 구할 수 있다. 이 때, $\mathbf{Hx} = \mathbf{x}^{\prime}$식을 통해 $\mathbf{x}^{\prime}\times(\mathbf{Hx}) = 0$식을 전개해보면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}^{\prime} \times (\mathbf{l}^{\prime\wedge}\mathbf{Fx} + \mu \mathbf{e}^{\prime}\mathbf{l}^{\intercal}\mathbf{x})  = 0 \\
  \end{aligned}
\end{equation}
<p>
이 된다. 이를 전개 후 정리해보면
</p>

\begin{equation}
  \begin{aligned}
    (\mathbf{x}^{\prime}\times \mathbf{e}^{\prime})\mathbf{l}^{\intercal}\mathbf{x} \cdot \mu &amp; = -\mathbf{x}^{\prime} \times \mathbf{l}^{\prime} \times \mathbf{Fx} \\
    &amp; = \mathbf{x}^{\prime} \times \mathbf{Fx} \times \mathbf{l}^{\prime}
  \end{aligned}
\end{equation}
<p>
이 되고 양변에 $(\mathbf{x}^{&prime;}&times; \mathbf{e}^{&prime;})^{\intercal}$을 곱하여 $&mu;$에 대하여 정리 후 $\mathbf{H}(&mu;)$식 에 넣어주면 
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H} = \mathbf{l}^{\prime\wedge}\mathbf{F} + \frac{(\mathbf{x}^{\prime}\times \mathbf{e}^{\prime})^{\intercal}(\mathbf{x}^{\prime}\times((\mathbf{Fx})\times \mathbf{l}^{\prime}))}{\| \mathbf{x}^{\prime}\times \mathbf{e}^{\prime} \|^{2}(\mathbf{l}^{\intercal}\mathbf{x})}\mathbf{e}^{\prime}\mathbf{l}^{\intercal} 
  \end{aligned}
\end{equation}
<p>
공식을 얻을 수 있다.
</p>
</div>
</div>
</div>

<div id="outline-container-org02fe78e" class="outline-3">
<h3 id="org02fe78e"><span class="section-number-3">5.3</span> Computing $\mathbf{F}$given the homography induced by a plane</h3>
<div class="outline-text-3" id="text-5-3">

<figure>
<img src="/pictures/200607_mvg/61.png" alt="61.png" align="center" width="600px">

</figure>

<p>
일반적으로 두 개의 카메라 행렬 대응쌍 $(\mathbf{P},\mathbf{P}^{&prime;})$에 대한 Fundamental Matrix $\mathbf{F}$를 계산하기 위해서는 최소 8개의 대응점 쌍 $(\mathbf{x}_{i},\mathbf{x}_{i}^{&prime;}), \ i=1,&ctdot;,8$이 필요하다. 하지만 <b>Scene Plane Homography를 이용하면 6개의 대응점 쌍만 사용해도 $\mathbf{F}$를 계산할 수 있다.</b> 단, 6개의 대응점 쌍들 중 4개 대응점 쌍 $(\mathbf{x}_{i}, \mathbf{x}_{i}^{&prime;}), \ i=1,&ctdot;,4$에 해당하는 월드 상의 점들의 동일한 평면 $\pi$위에 존재해야 한다는 제약조건이 있다.
</p>

<p>
6개의 대응점 쌍으로 Fundmaental Matrix $\mathbf{F}$를 계산하는 알고리즘의 순서는 다음과 같다.
</p>
<ul class="org-ul">
<li>월드 상의 평면 $\pi$위에 존재하는 4개의 점들 $\mathbf{X}_{i},\ i=1,&ctdot;,4$를 프로젝션한 대응점 쌍들 $(\mathbf{x}_{i}, \mathbf{x}_{i}^{&prime;}), \ i=1,&ctdot;,4$를 사용하여 $\mathbf{x}_{i}^{&prime;} = \mathbf{H}\mathbf{x}_{i}$를 만족하는 Homorgaphy $\mathbf{H}$를 계산한다. 이 때 4쌍의 대응점은 Homography $\mathbf{H}$를 유일하게 결정한다.</li>
<li><p>
남은 2개의 대응점 쌍 $(\mathbf{x}_{i}, \mathbf{x}_{i}^{&prime;}),\ i=5,6$을 사용하여 Epipole $\mathbf{e}^{&prime;}$를 구한다. $\mathbf{x}_{5}$를 Homography 변환한 $\mathbf{Hx}_{5}$와 $\mathbf{x}_{5}^{&prime;}$를 사용하여 두 점을 잇는 직선을 $(\mathbf{Hx}_{5})&times; \mathbf{x}_{5}^{&prime;}$와 같이 구한다. $\mathbf{x}_{6}$에 대해서도 마찬가지로 적용하여 직선 $(\mathbf{Hx}_{6})&times; \mathbf{x}_{6}^{&prime;}$를 구한 다음 두 직선이 교차하는 점을 구하면 그 점이 곧 Epipole $\mathbf{e}^{&prime;}$가 된다.
</p>
  \begin{equation}
    \begin{aligned}
      \mathbf{e}^{\prime} = (\mathbf{Hx}_{5}) \times \mathbf{x}_{5}^{\prime} \cap (\mathbf{Hx}_{6}) \times \mathbf{x}_{6}^{\prime}
    \end{aligned}
  \end{equation}</li>

<li>Fundamental Matrix $\mathbf{F}$를 $\mathbf{F}=\mathbf{e}^{&prime;&and;}\mathbf{H}$를 통해 구한다.</li>
</ul>
</div>
</div>

<div id="outline-container-orgfa30ee8" class="outline-3">
<h3 id="orgfa30ee8"><span class="section-number-3">5.4</span> The infinite homography $\mathbf{H}_{\infty}$</h3>
<div class="outline-text-3" id="text-5-4">

<figure>
<img src="/pictures/200607_mvg/62.png" alt="62.png" align="center" width="600px">

</figure>
</div>

<div id="outline-container-orgf3df7af" class="outline-4">
<h4 id="orgf3df7af"><span class="section-number-4">5.4.1</span> Definition 13.10</h4>
<div class="outline-text-4" id="text-5-4-1">
<p>
Scene Plane이 무한대 평면(plane at infinity) $&pi;_{&infin;}$인 경우, 이 때 계산한 Homography를 Infinity Homography $\mathbf{H}_{&infin;}$라고 한다.
</p>

<p>
카메라 행렬 대응쌍 $(\mathbf{P}, \mathbf{P}^{&prime;})$가 다음과 같이 주어졌을 때
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{P} = \mathbf{K}[\mathbf{I} \ |\ 0 ] &amp; \mathbf{P}^{\prime} = \mathbf{K}^{\prime}[\mathbf{R} \ |\ \mathbf{t} ] \\
  \end{aligned}
\end{equation}
<p>
월드 상의 평면 $&pi;(d) = \begin{pmatrix}\mathbf{v}\\ d \end{pmatrix}$에 대해 Homography는 다음과 같이 구할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{\pi(d)} = \mathbf{K}^{\prime}(\mathbf{R}-\frac{\mathbf{tn}^{\intercal}}{d})\mathbf{K}^{-1}
  \end{aligned}
\end{equation}
<p>
Inifinite Homography $\mathbf{H}_{&infin;}$는 $d$가 무한대인 경우에 해당하므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{H}_{\infty} = \lim_{d\rightarrow \infty} \mathbf{H}_{\pi(d)} = \mathbf{K}^{\prime}\mathbf{RK}^{-1}
  \end{aligned}
\end{equation}
<p>
가 된다. 따라서 <b>$\mathbf{H}_{&infin;}$는 $\mathbf{t}$에 의존하지 않고 오직 카메라의 회전에만 의존한다는 것을 알 수 있다.</b>
</p>
</div>
</div>

<div id="outline-container-org3b44cad" class="outline-4">
<h4 id="org3b44cad"><span class="section-number-4">5.4.2</span> Affine and metric reconstruction</h4>
<div class="outline-text-4" id="text-5-4-2">
<p>
만약 월드좌표계가 Affine인 경우 $&pi;_{&infin;}$는 $&pi;_{&infin;}=(0,0,0,1)^{\intercal}$과 같이 나타낼 수 있고 두 카메라 행렬이 $\mathbf{P}=[\mathbf{M}\ | \ \mathbf{m}], \ \mathbf{P}^{&prime;}=[\mathbf{M}^{&prime;} \ | \ \mathbf{m}^{&prime;}]$으로 주어진 경우 무한대 평면 상의 점 $\mathbf{X}&isin; &pi;_{&infin;}$를 각각 카메라에 프로젝션하면
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x} = \mathbf{PX} = [\mathbf{M} \ | \ \mathbf{m}] \begin{bmatrix} \tilde{\mathbf{X}} \\ 0 \end{bmatrix} = \mathbf{M}\tilde{\mathbf{X}} \\
    &amp; \mathbf{x}^{\prime} = \mathbf{P}^{\prime}\mathbf{X} = [\mathbf{M}^{\prime} \ | \ \mathbf{m}^{\prime}] \begin{bmatrix} \tilde{\mathbf{X}} \\ 0 \end{bmatrix} = \mathbf{M}^{\prime}\tilde{\mathbf{X}} = (\mathbf{\mathbf{M}^{\prime}\mathbf{M}^{-1}})\mathbf{x} \\
  \end{aligned}
\end{equation}
<p>
따라서 $\mathbf{x}^{&prime;} = (\mathbf{M}^{&prime;}\mathbf{M}^{-1})\mathbf{x}$가 되어 월드좌표계가 Affine일 때 두 카메라 사이의 Infinite Homography는 $\mathbf{H}_{&infin;} = \mathbf{M}^{'}\mathbf{M}^{-1}$가 된다.
</p>

<hr>
</div>
</div>
</div>
</div>

<div id="outline-container-org289cb01" class="outline-2">
<h2 id="org289cb01"><span class="section-number-2">6</span> Affine Epipolar Geometry</h2>
<div class="outline-text-2" id="text-6">

<figure>
<img src="/pictures/200607_mvg/63.png" alt="63.png" align="center" width="600px">

</figure>

<p>
핀홀 카메라(pinhole camera)는 월드 상의 물체가 이미지 평면 상에 프로젝션될 때 초점이라 부르는 하나의 점을 통과하여 이미지 평면상에 투과되는 카메라 모델을 의미한다. 따라서 핀홀 카메라 모델은 사영공간(projective space) $\mathbb{P}^{3} \mapsto\mathbb{P}^{2}$로 매핑하는 함수로 모델링 할 수 있고 원근법에 의한 왜곡이 발생한다. 이와 반대로 <b>Affine 카메라는 월드 상의 물체가 이미지 평면 상에 프로젝션 될 때 마치 무한대 광원에 의한 그림자 상이 맺히는 것과 같이 이미지 평면에 프로젝션되는 카메라를 의미한다. 따라서 Affine 카메라는 원근법에 의한 왜곡이 발생하지 않는다.</b>
</p>

<p>
Affine 카메라도 Canonical Form으로 나타낼 수 있다. 두 개의 Affine 카메라 $\mathbf{P}_{A}, \mathbf{P}_{A}^{&prime;}$가 주어졌을 때 월드 좌표계와 카메라 좌표계가 동일한 경우 $\mathbf{P}_{A}$의 주축(principal axis)는 $Z$축이 되고 이 때의 프로젝션은 $XY$평면으로 프로젝션이 된다. 그리고 $\mathbf{P}_{A}^{&prime;}$는 Affine 변환 $\mathbf{M}$과 카메라 이동 $\mathbf{t}$를 통해 표현할 수 있다. <b>이 때, 두 개의 Affine 카메라는 모두 마지막 행(row)이 $(0,0,0,1)$인 성질을 지닌다.</b>
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{P}_{A} &amp; = \begin{bmatrix} 1&amp;0&amp;0&amp;0 \\ 0&amp;1&amp;0&amp;0 \\ 0&amp;0&amp;0&amp;1 \end{bmatrix} &amp; \mathbf{P}_{A}^{\prime} &amp; = \begin{bmatrix} \mathbf{M} &amp; \mathbf{t}  \\ \mathbf{0} &amp; 1\end{bmatrix} \quad \text{where, }  \mathbf{M} \in \mathbb{R}^{2\times 3},\ \mathbf{t} \in \mathbb{R}^{2}
  \end{aligned}
\end{equation}
<p>
Affine 카메라 행렬 $\mathbf{P}_{A}$는 Affine 변환의 특성 상 <b>무한대 평면(plane at infinity) $\pi_{\infty}=(X,Y,Z,0)^{\intercal}$상의 한 점을 무한대 직선(line at infinity) $\mathbf{l}_{\infty}$상의 한 점으로 변환한다. 즉, 월드 상 물체의 평행한 성질이 보존된다.</b>
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{P}_{A} \begin{bmatrix} X\\Y\\Z\\0 \end{bmatrix} = \begin{bmatrix} \ast \\ \ast \\ 0 \end{bmatrix} \in \mathbf{l}_{\infty}
  \end{aligned}
\end{equation}
<p>
일반적인 Affine 카메라 행렬 $\begin{bmatrix}\mathbf{M}&amp; \mathbf{m}\\ \mathbf{0}&amp; 1 \end{bmatrix}&isin; \mathbb{R}^{3&times; 4}$에서 행렬 $\mathbf{M}&isin; \mathbb{R}^{2&times; 3}$의 rank는 2이므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{M}\tilde{\mathbf{C}} = 0
  \end{aligned}
\end{equation}
<p>
을 만족하는 Affine 카메라의 중심점 $\mathbf{C}$이 존재한다. <b>이 때, $\mathbf{C}$는 무한대 평면 상에 존재한다.</b>
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{C} = \begin{pmatrix} \tilde{\mathbf{C}} \\ 0 \end{pmatrix} \in \pi_{\infty}
  \end{aligned}
\end{equation}
<p>
Affine 카메라 행렬 $\mathbf{P}_{A}$의 중심점 $\mathbf{C}$는 $\mathbf{C}= \begin{bmatrix}0&amp;0&amp;1&amp;0 \end{bmatrix}^{\intercal}$이다. <b>즉, Affine 카메라의 중심점은 주축(principal axis)의 방향과 동일하다.</b>
</p>
</div>


<div id="outline-container-org3349b44" class="outline-3">
<h3 id="org3349b44"><span class="section-number-3">6.1</span> Affine epipolar geometry</h3>
<div class="outline-text-3" id="text-6-1">

<figure>
<img src="/pictures/200607_mvg/64.png" alt="64.png" align="center" width="800px">

</figure>
</div>

<div id="outline-container-orgbcfb884" class="outline-4">
<h4 id="orgbcfb884"><span class="section-number-4">6.1.1</span> Epipolar lines</h4>
<div class="outline-text-4" id="text-6-1-1">
<p>
두 개의 동일한 Affine 카메라가 주어졌을 때, 이들의 Back-projection 직선을 생각해보자. 첫 번째 Affine 카메라의 이미지 평면 상의 한 점 $\mathbf{x}$를 Back-projection하면
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{X}(\lambda) = \mathbf{P}_{A}^{\dagger}\mathbf{x} + \lambda \begin{bmatrix} \tilde{\mathbf{C}} \\ 0 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
이 되므로 Back-projection 직선들의 방향이 곧 Affine 카메라의 중심점 방향 $\begin{bmatrix}~{\mathbf{C}} \\ 0 \end{bmatrix}$이 된다. <b>즉, Affine 카메라의 이미지 평면 상 모든 점들의 Back-projection 직선들은 평행하므로 이를 두 번째 Affine 카메라에 프로젝션한 Epipolar Line들 또한 모두 평행하다.</b>
</p>
</div>
</div>

<div id="outline-container-orga4d4898" class="outline-4">
<h4 id="orga4d4898"><span class="section-number-4">6.1.2</span> The epipoles</h4>
<div class="outline-text-4" id="text-6-1-2">
<p>
Epipolar Line들이 모두 평행하므로 <b>Epipole들은 모두 무한대 직선(line at infinity) 상에 존재한다.</b>
</p>
</div>
</div>
</div>

<div id="outline-container-org34c7074" class="outline-3">
<h3 id="org34c7074"><span class="section-number-3">6.2</span> The affine fundamental matrix</h3>
<div class="outline-text-3" id="text-6-2">
</div>
<div id="outline-container-orgdeabc81" class="outline-4">
<h4 id="orgdeabc81"><span class="section-number-4">6.2.1</span> Result 14.1</h4>
<div class="outline-text-4" id="text-6-2-1">
<p>
두 개의 동일한 Affine 카메라가 주어졌을 때 이를 통해 Affine Fundamental Matrix $\mathbf{F}_{A}$를 정의할 수 있다. 이 때, $\mathbf{F}_{A}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F}_{A} = \begin{bmatrix} 0&amp;0&amp;\ast \\ 0&amp;0&amp;\ast \\ \ast&amp;\ast&amp;\ast \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
꼴로 나타난다. $&lowast;$는 0이 아닌 값을 의미한다. 일반적으로 $\mathbf{F}_{A}$는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F}_{A} = \begin{bmatrix} 0&amp;0&amp;a \\ 0&amp;0&amp;b \\ c&amp;d&amp;e \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
와 같이 작성한다. $\mathbf{F}_{A}$는 일반적인 Fundamental Matrix와 동일하게 rank 2를 가진다.
</p>
</div>
</div>

<div id="outline-container-orgef37007" class="outline-4">
<h4 id="orgef37007"><span class="section-number-4">6.2.2</span> Derivation</h4>
</div>
<div id="outline-container-orgacf7efe" class="outline-4">
<h4 id="orgacf7efe"><span class="section-number-4">6.2.3</span> Geometric derivation</h4>
<div class="outline-text-4" id="text-6-2-3">
<p>
두 개의 Affine 카메라 행렬 $\mathbf{P}_{A}, \mathbf{P}_{A}^{&prime;}$가 주어졌을 때 둘 사이에는 Affine 변환의 성질에 의해 평행한 선들이 보존된다. 따라서 두 이미지 평면의 Homography $\mathbf{H}_{A}$는 Affine Homography가 되어
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x}^{\prime} = \mathbf{H}_{A} \mathbf{x} \quad \text{where, } \mathbf{H}_{A} = \begin{bmatrix} \ast&amp;\ast&amp;\ast \\ \ast&amp;\ast&amp;\ast \\ 0&amp;0&amp;1 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
을 만족한다. Affine 카메라의 Epipole $\mathbf{e}^{&prime;}$은 무한대 직선(line at infinity) 상에 존재하므로 $\mathbf{e}^{&prime;}$의 Cross Product는
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{e}^{\prime\wedge} = \begin{bmatrix} 0&amp;0&amp;\ast \\ 0&amp;0&amp;\ast \\ \ast&amp;\ast&amp;0 \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
꼴이다. Affine Fundamental Matrix $\mathbf{F}_{A}$는 $\mathbf{F}_{A} = \mathbf{e}^{&prime;&and;}\mathbf{H}_{A}$를 통해 계산할 수 있으므로
</p>

\begin{equation}
  \begin{aligned}
    \mathbf{F}_{A} &amp; = \mathbf{e}^{\prime \wedge}\mathbf{H}_{A} \\
    &amp; = \begin{bmatrix} 0&amp;0&amp;\ast \\ 0&amp;0&amp;\ast \\ \ast&amp;\ast&amp;0 \end{bmatrix} \begin{bmatrix} \ast&amp;\ast&amp;\ast \\ \ast&amp;\ast&amp;\ast \\ 0&amp;0&amp;1 \end{bmatrix} = \begin{bmatrix} 0&amp;0&amp;\ast \\ 0&amp;0&amp;\ast \\ \ast&amp;\ast&amp;\ast \end{bmatrix}
  \end{aligned}
\end{equation}
<p>
와 같은 형태가 된다.
</p>
</div>
</div>

<div id="outline-container-org900b6f2" class="outline-4">
<h4 id="org900b6f2"><span class="section-number-4">6.2.4</span> Properties</h4>
</div>
<div id="outline-container-org22cd108" class="outline-4">
<h4 id="org22cd108"><span class="section-number-4">6.2.5</span> The epipoles</h4>
<div class="outline-text-4" id="text-6-2-5">
<p>
Affine Fundamental Matrix $\mathbf{F}_{A}$가 주어졌을 때 이를 통해 Epipole $\mathbf{e}, \mathbf{e}^{&prime;}$를 계산할 수 있다. $\mathbf{F}_{A}$가
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{F}_{A} = \begin{bmatrix} 0&amp;0&amp;a \\ 0&amp;0&amp;b \\ c&amp;d&amp;e \end{bmatrix} \\
  \end{aligned}
\end{equation}
<p>
일 때 <b>Fundamental Matrix의 성질로 인해 $\mathbf{F}_{A}\mathbf{e}= 0$와 $\mathbf{e}^{&prime; \intercal}\mathbf{F}_{A} = 0$가 성립하므로 다음과 같이 계산할 수 있다.</b>
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{e} = \begin{bmatrix} -d &amp; c &amp; 0 \end{bmatrix}^{\intercal}\\
    &amp; \mathbf{e}^{\prime} = \begin{bmatrix} -b &amp; a &amp; 0 \end{bmatrix}^{\intercal}
  \end{aligned}
\end{equation}
</div>
</div>


<div id="outline-container-orgbd590ab" class="outline-4">
<h4 id="orgbd590ab"><span class="section-number-4">6.2.6</span> Epipolar lines</h4>
<div class="outline-text-4" id="text-6-2-6">
<p>
첫 번째 Affine 이미지 평면 상의 점 $\mathbf{x}$와 Affine Fundamental Matrix $\mathbf{F}_{A}$가 주어졌을 때 두 번째 Affine 이미지 평면 상의 Epipolar Line $\mathbf{l}^{&prime;}$는 다음과 같이 계산할 수 있다.
</p>

\begin{equation}
  \begin{aligned}
    &amp; \mathbf{x} = \begin{pmatrix} x&amp;y&amp;1 \end{pmatrix}^{\intercal} \\
    &amp; \mathbf{F}_{A} = \begin{bmatrix} 0&amp;0&amp;a \\ 0&amp;0&amp;b \\ c&amp;d&amp;e \end{bmatrix} \\
    &amp; \mathbf{l}^{\prime} = \mathbf{F}_{A}\mathbf{x} = \begin{pmatrix} a &amp; b &amp; cx+dy+e \end{pmatrix}^{\intercal}
  \end{aligned}
\end{equation}
<p>
<b>Epipolar Line $\mathbf{l}^{&prime;}$의 처음 두 개의 항 $(a,b)$가 이미지 평면 상의 점 $\mathbf{x}=(x,y,1)^{\intercal}$에 독립적이므로 이는 곧 $\mathbf{x}$에 관계없이 Epipolar Line들이 평행하다는 것을 의미한다.</b>
</p>
</div>
</div>
</div>

<div id="outline-container-org8640985" class="outline-3">
<h3 id="org8640985"><span class="section-number-3">6.3</span> Estimating $\mathbf{F}_{A}$from image point correspondences</h3>
<div class="outline-text-3" id="text-6-3">

<figure>
<img src="/pictures/200607_mvg/65.png" alt="65.png" align="center" width="600px">

</figure>

<p>
Projective 카메라의 Fundamental Matrix $\mathbf{F}$를 계산하기 위해서는 두 이미지 평면 사이에 대응점 쌍 $(\mathbf{x},\mathbf{x}^{&prime;})$가 최소 8개 이상이 필요하다. 하지만 Affine 카메라의 Affine Fundamental Matrix $\mathbf{F}_{A}$는 앞서 설명한 것과 같이 좌상단 $2\times 2$항이 0이므로 최소 4개 이상의 대응점 쌍 $(\mathbf{x}, \mathbf{x}^{&prime;})$만으로도 $\mathbf{F}_{A}$를 구할 수 있다.
</p>
</div>


<div id="outline-container-org90dbaa9" class="outline-4">
<h4 id="org90dbaa9"><span class="section-number-4">6.3.1</span> Algorithm 14.2</h4>
<div class="outline-text-4" id="text-6-3-1">
<ul class="org-ul">
<li><b>Objective:</b> Affine 이미지 평면에서 4개의 대응점 쌍 $(\mathbf{x}_{i},\mathbf{x}_{i}^{&prime;}),\ i=1,&ctdot;,4$가 주어졌을 때 이를 통해 Affine Fundamental Matrix를 구한다.</li>
<li><p>
우선 처음 세 개의 대응점 쌍 $(\mathbf{x}_{i},\mathbf{x}_{i}^{&prime;}),\ i=1,2,3$을 Back-projection함으로써 월드 상의 점 $\mathbf{X}_{i},\ i=1,2,3$을 구할 수 있고 이 점들을 Span함으로써 유일한 평면 $&pi;$가 결정할 수 있다.
</p>

  \begin{equation}
    \begin{aligned}
      \pi = \text{Span}\{ \mathbf{X}_{1}, \mathbf{X}_{2}, \mathbf{X}_{3} \}
    \end{aligned}
  \end{equation}</li>

<li><b>월드 상의 평면 $&pi;$에 대해 $\mathbf{x}^{&prime;} = \mathbf{H}_{A}\mathbf{x}$를 만족하는 Affine Homography $\mathbf{H}_{A}$를 구한다.</b> 일반적으로 Homography를 구하기 위해서는 네 개 이상의 대응점 쌍이 필요하지만 Affine Homography는 마지막 행이 항상 $(0,0,1)$이므로 세 개의 대응점 쌍을 통해서도 $\mathbf{H}_{A}$를 계산할 수 있다.</li>

<li><p>
나머지 한 점 $\mathbf{x}_{4}$를 사용하여 $\mathbf{H}_{A}\mathbf{x}_{4}$와 $\mathbf{x}_{4}$를 잇는 <b>Epipolar Line $\mathbf{l}^{&prime;}$을 계산한다.</b>
</p>

  \begin{equation}
    \begin{aligned}
      \mathbf{l}^{\prime} = \mathbf{H}_{A}\mathbf{x}_{4} \times \mathbf{x}^{\prime}_{4}
    \end{aligned}
  \end{equation}
<p>
<b>Epipolar Line $\mathbf{l}^{&prime;}$를 계산했으면 이를 통해 Epipole $\mathbf{e}^{&prime;} = (-l_{2}^{&prime;},l_{1}^{&prime;},0)^{\intercal}$를 계산할 수 있다.</b> 만약 $\mathbf{x}_{4}$를 Back-projection한 월드 상의 점 $\mathbf{X}_{4}$가 월드 상의 평면 $\pi$위에 존재하는 경우 Epipolar Line을 구할 수 없다. 
</p></li>

<li><p>
$\mathbf{F}_{A} = \mathbf{e}^{&prime;&and;}\mathbf{H}_{A}$를 통해 Affine Fundamental Matrix를 계산한다.
</p>

  \begin{equation}
    \begin{aligned}
      \mathbf{F}_{A} = \begin{bmatrix} -l_{2}^{\prime}&amp;l_{1}^{\prime}&amp;0 \end{bmatrix}^{\intercal\wedge}\mathbf{H}_{A}
    \end{aligned}
  \end{equation}</li>
</ul>
</div>
</div>
</div>
</div>


<div id="outline-container-org40e9c52" class="outline-2">
<h2 id="org40e9c52"><span class="section-number-2">7</span> References</h2>
<div class="outline-text-2" id="text-7">
<p>
<a href="https://www.robots.ox.ac.uk/~vgg/hzbook/">Hartley, Richard, and Andrew Zisserman. Multiple view geometry in computer vision. Cambridge university press, 2003</a>
</p>
</div>
</div>
<div id="outline-container-orgcb637de" class="outline-2">
<h2 id="orgcb637de"><span class="section-number-2">8</span> Closure</h2>
<div class="outline-text-2" id="text-8">
<p>
PDF version is available at <a href="https://www.facebook.com/groups/slamkr/permalink/1187090471650595/">here</a>.
</p>
</div>
</div>
